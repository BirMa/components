(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{BwBJ:function(t,e,i){"use strict";i.d(e,"a",(function(){return r}));var n=i("Efrr"),o=i("5uGe"),s=i("ryP2");function r(t,e=n.a){var i;const o=(i=t)instanceof Date&&!isNaN(+i)?+t-e.now():Math.abs(t);return t=>t.lift(new c(o,e))}class c{constructor(t,e){this.delay=t,this.scheduler=e}call(t,e){return e.subscribe(new a(t,this.delay,this.scheduler))}}class a extends o.a{constructor(t,e,i){super(t),this.delay=e,this.scheduler=i,this.queue=[],this.active=!1,this.errored=!1}static dispatch(t){const e=t.source,i=e.queue,n=t.scheduler,o=t.destination;for(;i.length>0&&i[0].time-n.now()<=0;)i.shift().notification.observe(o);if(i.length>0){const e=Math.max(0,i[0].time-n.now());this.schedule(t,e)}else this.unsubscribe(),e.active=!1}_schedule(t){this.active=!0,this.destination.add(t.schedule(a.dispatch,this.delay,{source:this,destination:this.destination,scheduler:t}))}scheduleNotification(t){if(!0===this.errored)return;const e=this.scheduler,i=new d(e.now()+this.delay,t);this.queue.push(i),!1===this.active&&this._schedule(e)}_next(t){this.scheduleNotification(s.a.createNext(t))}_error(t){this.errored=!0,this.queue=[],this.destination.error(t),this.unsubscribe()}_complete(){this.scheduleNotification(s.a.createComplete()),this.unsubscribe()}}class d{constructor(t,e){this.time=t,this.notification=e}}},IKhh:function(t,e,i){"use strict";i.r(e),i.d(e,"ViewDemoModule",(function(){return B}));var n=i("2kYt"),o=i("nIj0"),s=i("PBFl"),r=i("Meci"),c=i("+Tre"),a=i("sEIs"),d=i("bwdy"),u=i("EM62"),h=i("tUta"),l=i("bFHC"),b=i("7V4E");function p(t,e){if(1&t&&(u.Sb(0,"ps-block-ui",5),u.hc(1),u.Rb()),2&t){const t=u.dc(2);u.jc("blocked",t.contentBlocked)}}function g(t,e){if(1&t&&(u.Sb(0,"mat-icon",8),u.Ac(1),u.Rb()),2&t){const t=u.dc(3);u.Ab(1),u.Bc(t.exception.icon)}}function _(t,e){if(1&t&&(u.Sb(0,"mat-card",6),u.yc(1,g,2,1,"mat-icon",7),u.Sb(2,"span"),u.Ac(3),u.ec(4,"psErrorMessage"),u.Rb(),u.Rb()),2&t){const t=u.dc(2);u.Eb("ps-view__error-container--center",t.exception.alignCenter),u.Ab(1),u.jc("ngIf",t.exception.icon),u.Ab(2),u.Bc(u.fc(4,4,t.exception.errorObject))}}function m(t,e){if(1&t&&(u.Sb(0,"div",1),u.Sb(1,"div",2),u.yc(2,p,2,1,"ps-block-ui",3),u.yc(3,_,5,6,"mat-card",4),u.Rb(),u.Rb()),2&t){const t=u.dc();u.Ab(2),u.jc("ngIf",t.contentVisible),u.Ab(1),u.jc("ngIf",t.exception)}}const f=["*"];let w=(()=>{class t{constructor(t){this.cd=t,this._dataSourceSub=d.a.EMPTY}set dataSource(t){this._dataSource&&(this._dataSource.disconnect(),this._dataSourceSub.unsubscribe()),this._dataSource=t,this._dataSource&&this.activateDataSource()}get dataSource(){return this._dataSource}get contentVisible(){return this.dataSource.contentVisible}get contentBlocked(){return this.dataSource.contentBlocked}get exception(){return this.dataSource.exception}ngOnDestroy(){this._dataSourceSub.unsubscribe(),this._dataSource&&this._dataSource.disconnect()}activateDataSource(){this._dataSource&&(this._dataSourceSub=this._dataSource.connect().subscribe(()=>{this.cd.markForCheck()}))}}return t.\u0275fac=function(e){return new(e||t)(u.Mb(u.h))},t.\u0275cmp=u.Gb({type:t,selectors:[["ps-view"]],inputs:{dataSource:"dataSource"},ngContentSelectors:f,decls:1,vars:1,consts:[["class","ps-view__main-container",4,"ngIf"],[1,"ps-view__main-container"],[1,"ps-view__cards-container"],[3,"blocked",4,"ngIf"],["class","ps-view__error-container",3,"ps-view__error-container--center",4,"ngIf"],[3,"blocked"],[1,"ps-view__error-container"],["class","ps-view__error-icon",4,"ngIf"],[1,"ps-view__error-icon"]],template:function(t,e){1&t&&(u.ic(),u.yc(0,m,4,2,"div",0)),2&t&&u.jc("ngIf",e.dataSource)},directives:[n.m,h.a,r.a,l.a],pipes:[b.a],styles:[".ps-view__main-container{box-sizing:border-box}.ps-view__cards-container{display:grid;grid-gap:1em}mat-card.ps-view__error-container{color:var(--ps-error)}mat-card.ps-view__error-container--center{display:grid;justify-items:center}mat-icon.ps-view__error-icon{color:var(--ps-error);font-size:72px;height:72px;width:72px}"],encapsulation:2,changeDetection:0}),t})();var S=i("TqqQ"),v=i("aCbn");let y=(()=>{class t{}return t.\u0275mod=u.Kb({type:t}),t.\u0275inj=u.Jb({factory:function(e){return new(e||t)},imports:[[n.c,r.e,l.b,S.a,v.a]]}),t})();var x=i("ZTXN"),C=i("C05f"),k=i("ROBh"),j=i("J+dc"),M=i("BwBJ"),E=i("YtkY");function A(t,e){if(1&t&&(u.Sb(0,"div",8),u.Ac(1),u.ec(2,"json"),u.Rb()),2&t){const t=e.$implicit;u.Ab(1),u.Bc(u.fc(2,1,t))}}class R{constructor(t){this.options=t,this._loading=!1,this._hasLoadError=!1,this._blockView=!1,this.stateChanges$=new x.a,this._loadingSub=d.a.EMPTY,this._connectSub=d.a.EMPTY}get contentVisible(){return!this._hasLoadError}get contentBlocked(){return this._loading||this._blockView}connect(){return this._connectSub=this.options.loadTrigger$.subscribe(t=>{this.loadData(t)}),this.stateChanges$}disconnect(){this._connectSub.unsubscribe(),this._loadingSub.unsubscribe()}setViewBlocked(t){this._blockView=t,this.stateChanges$.next()}loadData(t){this._loadingSub.unsubscribe(),this._loading=!0,this._hasLoadError=!1,this.exception=null,this.stateChanges$.next(),this._loadingSub=this.options.loadFn(t).pipe(Object(j.a)(1)).subscribe({next:()=>{this._loading=!1,this.stateChanges$.next()},error:t=>{this._loading=!1,this._hasLoadError=!0,this.exception={errorObject:t,alignCenter:!0,icon:"sentiment_very_dissatisfied"},this.stateChanges$.next()}})}}let O=(()=>{class t{constructor(){this.loadError=!1,this.counter=0,this.logs=[],this.loadTrigger$=new C.a(this.counter),this.dataSource=new R({loadTrigger$:this.loadTrigger$,loadFn:t=>(this.logs.push({type:"load",params:t}),Object(k.a)({loadCount:t,time:new Date}).pipe(Object(M.a)(1e3),Object(E.a)(t=>{if(this.loadError)throw new Error("this is the server error (loading)");return this.item=t,t})))})}reload(){this.loadTrigger$.next(++this.counter)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=u.Gb({type:t,selectors:[["app-view-demo"]],decls:15,vars:6,consts:[[1,"app-view-data-source-demo__settings"],[3,"ngModel","ngModelChange"],["mat-flat-button","","type","button","color","accent",3,"click"],[1,"app-form-data-source-demo__grid"],[3,"dataSource"],[2,"height","500px","margin-top","1em"],[1,"app-view-data-source-demo__logs"],["class","app-view-data-source-demo__log-item",4,"ngFor","ngForOf"],[1,"app-view-data-source-demo__log-item"]],template:function(t,e){1&t&&(u.Sb(0,"mat-card",0),u.Sb(1,"mat-checkbox",1),u.Zb("ngModelChange",(function(t){return e.loadError=t})),u.Ac(2,"load error"),u.Rb(),u.Sb(3,"button",2),u.Zb("click",(function(){return e.reload()})),u.Ac(4,"reload"),u.Rb(),u.Rb(),u.Sb(5,"div",3),u.Sb(6,"ps-view",4),u.Sb(7,"mat-card"),u.Sb(8,"pre"),u.Ac(9),u.ec(10,"json"),u.Rb(),u.Rb(),u.Sb(11,"mat-card",5),u.Ac(12,"dummy card"),u.Rb(),u.Rb(),u.Sb(13,"mat-card",6),u.yc(14,A,3,3,"div",7),u.Rb(),u.Rb()),2&t&&(u.Ab(1),u.jc("ngModel",e.loadError),u.Ab(5),u.jc("dataSource",e.dataSource),u.Ab(3),u.Bc(u.fc(10,4,e.item)),u.Ab(5),u.jc("ngForOf",e.logs))},directives:[r.a,c.a,o.n,o.q,s.a,w,n.l],pipes:[n.g],styles:[".app-view-data-source-demo__settings[_ngcontent-%COMP%] {\n        margin-bottom: 1em;\n      }\n\n      .app-view-data-source-demo__settings[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%] {\n        margin: 1em;\n      }\n\n      .app-view-data-source-demo__grid[_ngcontent-%COMP%] {\n        display: grid;\n        grid-template-columns: 2fr 1fr;\n        grid-gap: 1em;\n      }\n\n      .app-view-data-source-demo__logs[_ngcontent-%COMP%] {\n        margin-top: 1em;\n      }\n\n      .app-view-data-source-demo__log-item[_ngcontent-%COMP%] {\n        margin-bottom: 0.25em;\n        padding-bottom: 0.25em;\n        border-bottom: 1px solid #ccc;\n        font-size: 0.95em;\n      }"],changeDetection:0}),t})(),B=(()=>{class t{}return t.\u0275mod=u.Kb({type:t}),t.\u0275inj=u.Jb({factory:function(e){return new(e||t)},imports:[[o.j,n.c,a.d.forChild([{path:"",component:O}]),r.e,c.b,s.b,y]]}),t})()}}]);