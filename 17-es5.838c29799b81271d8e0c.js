!function(){function t(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),r&&e(t,r)}function e(t,r){return(e=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,r)}function r(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,a=o(t);if(e){var i=o(this).constructor;r=Reflect.construct(a,arguments,i)}else r=a.apply(this,arguments);return n(this,r)}}function n(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function o(t){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function s(t,e,r){return e&&i(t.prototype,e),r&&i(t,r),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{"3E0/":function(e,n,o){"use strict";o.d(n,"a",function(){return d});var i=o("D0XW"),c=o("7o/Q"),u=o("WMd4");function d(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.a,n=(e=t)instanceof Date&&!isNaN(+e)?+t-r.now():Math.abs(t);return function(t){return t.lift(new f(n,r))}}var f=function(){function t(e,r){a(this,t),this.delay=e,this.scheduler=r}return s(t,[{key:"call",value:function(t,e){return e.subscribe(new m(t,this.delay,this.scheduler))}}]),t}(),m=function(e){t(o,e);var n=r(o);function o(t,e,r){var i;return a(this,o),(i=n.call(this,t)).delay=e,i.scheduler=r,i.queue=[],i.active=!1,i.errored=!1,i}return s(o,[{key:"_schedule",value:function(t){this.active=!0,this.destination.add(t.schedule(o.dispatch,this.delay,{source:this,destination:this.destination,scheduler:t}))}},{key:"scheduleNotification",value:function(t){if(!0!==this.errored){var e=this.scheduler,r=new l(e.now()+this.delay,t);this.queue.push(r),!1===this.active&&this._schedule(e)}}},{key:"_next",value:function(t){this.scheduleNotification(u.a.createNext(t))}},{key:"_error",value:function(t){this.errored=!0,this.queue=[],this.destination.error(t),this.unsubscribe()}},{key:"_complete",value:function(){this.scheduleNotification(u.a.createComplete()),this.unsubscribe()}}],[{key:"dispatch",value:function(t){for(var e=t.source,r=e.queue,n=t.scheduler,o=t.destination;r.length>0&&r[0].time-n.now()<=0;)r.shift().notification.observe(o);if(r.length>0){var a=Math.max(0,r[0].time-n.now());this.schedule(t,a)}else this.unsubscribe(),e.active=!1}}]),o}(c.a),l=function t(e,r){a(this,t),this.time=e,this.notification=r}},Xa2L:function(e,n,o){"use strict";o.d(n,"a",function(){return S}),o.d(n,"b",function(){return y});var i=o("fXoL"),c=o("ofXK"),u=o("FKr1"),d=o("8LU1"),f=o("nLfN"),m=o("R1ws");function l(t,e){if(1&t&&(i.ec(),i.Pb(0,"circle",3)),2&t){var r=i.fc();i.vc("animation-name","mat-progress-spinner-stroke-rotate-"+r._spinnerAnimationLabel)("stroke-dashoffset",r._getStrokeDashOffset(),"px")("stroke-dasharray",r._getStrokeCircumference(),"px")("stroke-width",r._getCircleStrokeWidth(),"%"),i.Db("r",r._getCircleRadius())}}function h(t,e){if(1&t&&(i.ec(),i.Pb(0,"circle",3)),2&t){var r=i.fc();i.vc("stroke-dashoffset",r._getStrokeDashOffset(),"px")("stroke-dasharray",r._getStrokeCircumference(),"px")("stroke-width",r._getCircleStrokeWidth(),"%"),i.Db("r",r._getCircleRadius())}}function p(t,e){if(1&t&&(i.ec(),i.Pb(0,"circle",3)),2&t){var r=i.fc();i.vc("animation-name","mat-progress-spinner-stroke-rotate-"+r._spinnerAnimationLabel)("stroke-dashoffset",r._getStrokeDashOffset(),"px")("stroke-dasharray",r._getStrokeCircumference(),"px")("stroke-width",r._getCircleStrokeWidth(),"%"),i.Db("r",r._getCircleRadius())}}function b(t,e){if(1&t&&(i.ec(),i.Pb(0,"circle",3)),2&t){var r=i.fc();i.vc("stroke-dashoffset",r._getStrokeDashOffset(),"px")("stroke-dasharray",r._getStrokeCircumference(),"px")("stroke-width",r._getCircleStrokeWidth(),"%"),i.Db("r",r._getCircleRadius())}}var g=".mat-progress-spinner{display:block;position:relative;overflow:hidden}.mat-progress-spinner svg{position:absolute;transform:rotate(-90deg);top:0;left:0;transform-origin:center;overflow:visible}.mat-progress-spinner circle{fill:transparent;transform-origin:center;transition:stroke-dashoffset 225ms linear}._mat-animation-noopable.mat-progress-spinner circle{transition:none;animation:none}.cdk-high-contrast-active .mat-progress-spinner circle{stroke:currentColor}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] svg{animation:mat-progress-spinner-linear-rotate 2000ms linear infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] svg{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition-property:stroke;animation-duration:4000ms;animation-timing-function:cubic-bezier(0.35, 0, 0.25, 1);animation-iteration-count:infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-fallback-animation[mode=indeterminate] svg{animation:mat-progress-spinner-stroke-rotate-fallback 10000ms cubic-bezier(0.87, 0.03, 0.33, 1) infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-fallback-animation[mode=indeterminate] svg{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-fallback-animation[mode=indeterminate] circle{transition-property:stroke}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-fallback-animation[mode=indeterminate] circle{transition:none;animation:none}@keyframes mat-progress-spinner-linear-rotate{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes mat-progress-spinner-stroke-rotate-100{0%{stroke-dashoffset:268.606171575px;transform:rotate(0)}12.5%{stroke-dashoffset:56.5486677px;transform:rotate(0)}12.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(72.5deg)}25%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(72.5deg)}25.0001%{stroke-dashoffset:268.606171575px;transform:rotate(270deg)}37.5%{stroke-dashoffset:56.5486677px;transform:rotate(270deg)}37.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(161.5deg)}50%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(161.5deg)}50.0001%{stroke-dashoffset:268.606171575px;transform:rotate(180deg)}62.5%{stroke-dashoffset:56.5486677px;transform:rotate(180deg)}62.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(251.5deg)}75%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(251.5deg)}75.0001%{stroke-dashoffset:268.606171575px;transform:rotate(90deg)}87.5%{stroke-dashoffset:56.5486677px;transform:rotate(90deg)}87.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(341.5deg)}100%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(341.5deg)}}@keyframes mat-progress-spinner-stroke-rotate-fallback{0%{transform:rotate(0deg)}25%{transform:rotate(1170deg)}50%{transform:rotate(2340deg)}75%{transform:rotate(3510deg)}100%{transform:rotate(4680deg)}}\n",_=Object(u.s)(function t(e){a(this,t),this._elementRef=e},"primary"),v=new i.s("mat-progress-spinner-default-options",{providedIn:"root",factory:function(){return{diameter:100}}}),k=function(){var e=function(e){t(o,e);var n=r(o);function o(t,e,r,i,s){var c;a(this,o),(c=n.call(this,t))._elementRef=t,c._document=r,c._diameter=100,c._value=0,c._fallbackAnimation=!1,c.mode="determinate";var u=o._diameters;return c._spinnerAnimationLabel=c._getSpinnerAnimationLabel(),u.has(r.head)||u.set(r.head,new Set([100])),c._fallbackAnimation=e.EDGE||e.TRIDENT,c._noopAnimations="NoopAnimations"===i&&!!s&&!s._forceAnimations,s&&(s.diameter&&(c.diameter=s.diameter),s.strokeWidth&&(c.strokeWidth=s.strokeWidth)),c}return s(o,[{key:"diameter",get:function(){return this._diameter},set:function(t){this._diameter=Object(d.f)(t),this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),!this._fallbackAnimation&&this._styleRoot&&this._attachStyleNode()}},{key:"strokeWidth",get:function(){return this._strokeWidth||this.diameter/10},set:function(t){this._strokeWidth=Object(d.f)(t)}},{key:"value",get:function(){return"determinate"===this.mode?this._value:0},set:function(t){this._value=Math.max(0,Math.min(100,Object(d.f)(t)))}},{key:"ngOnInit",value:function(){var t=this._elementRef.nativeElement;this._styleRoot=Object(f.c)(t)||this._document.head,this._attachStyleNode(),t.classList.add("mat-progress-spinner-indeterminate".concat(this._fallbackAnimation?"-fallback":"","-animation"))}},{key:"_getCircleRadius",value:function(){return(this.diameter-10)/2}},{key:"_getViewBox",value:function(){var t=2*this._getCircleRadius()+this.strokeWidth;return"0 0 ".concat(t," ").concat(t)}},{key:"_getStrokeCircumference",value:function(){return 2*Math.PI*this._getCircleRadius()}},{key:"_getStrokeDashOffset",value:function(){return"determinate"===this.mode?this._getStrokeCircumference()*(100-this._value)/100:this._fallbackAnimation&&"indeterminate"===this.mode?.2*this._getStrokeCircumference():null}},{key:"_getCircleStrokeWidth",value:function(){return this.strokeWidth/this.diameter*100}},{key:"_attachStyleNode",value:function(){var t=this._styleRoot,e=this._diameter,r=o._diameters,n=r.get(t);if(!n||!n.has(e)){var a=this._document.createElement("style");a.setAttribute("mat-spinner-animation",this._spinnerAnimationLabel),a.textContent=this._getAnimationText(),t.appendChild(a),n||(n=new Set,r.set(t,n)),n.add(e)}}},{key:"_getAnimationText",value:function(){var t=this._getStrokeCircumference();return"\n @keyframes mat-progress-spinner-stroke-rotate-DIAMETER {\n    0%      { stroke-dashoffset: START_VALUE;  transform: rotate(0); }\n    12.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(0); }\n    12.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(72.5deg); }\n    25%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(72.5deg); }\n\n    25.0001%   { stroke-dashoffset: START_VALUE;  transform: rotate(270deg); }\n    37.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(270deg); }\n    37.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(161.5deg); }\n    50%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(161.5deg); }\n\n    50.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(180deg); }\n    62.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(180deg); }\n    62.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(251.5deg); }\n    75%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(251.5deg); }\n\n    75.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(90deg); }\n    87.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(90deg); }\n    87.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(341.5deg); }\n    100%    { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(341.5deg); }\n  }\n".replace(/START_VALUE/g,""+.95*t).replace(/END_VALUE/g,""+.2*t).replace(/DIAMETER/g,"".concat(this._spinnerAnimationLabel))}},{key:"_getSpinnerAnimationLabel",value:function(){return this.diameter.toString().replace(".","_")}}]),o}(_);return e.\u0275fac=function(t){return new(t||e)(i.Ob(i.l),i.Ob(f.a),i.Ob(c.d,8),i.Ob(m.a,8),i.Ob(v))},e.\u0275cmp=i.Ib({type:e,selectors:[["mat-progress-spinner"]],hostAttrs:["role","progressbar",1,"mat-progress-spinner"],hostVars:10,hostBindings:function(t,e){2&t&&(i.Db("aria-valuemin","determinate"===e.mode?0:null)("aria-valuemax","determinate"===e.mode?100:null)("aria-valuenow","determinate"===e.mode?e.value:null)("mode",e.mode),i.vc("width",e.diameter,"px")("height",e.diameter,"px"),i.Gb("_mat-animation-noopable",e._noopAnimations))},inputs:{color:"color",mode:"mode",diameter:"diameter",strokeWidth:"strokeWidth",value:"value"},exportAs:["matProgressSpinner"],features:[i.zb],decls:3,vars:8,consts:[["preserveAspectRatio","xMidYMid meet","focusable","false",3,"ngSwitch"],["cx","50%","cy","50%",3,"animation-name","stroke-dashoffset","stroke-dasharray","stroke-width",4,"ngSwitchCase"],["cx","50%","cy","50%",3,"stroke-dashoffset","stroke-dasharray","stroke-width",4,"ngSwitchCase"],["cx","50%","cy","50%"]],template:function(t,e){1&t&&(i.ec(),i.Ub(0,"svg",0),i.yc(1,l,1,9,"circle",1),i.yc(2,h,1,7,"circle",2),i.Tb()),2&t&&(i.vc("width",e.diameter,"px")("height",e.diameter,"px"),i.lc("ngSwitch","indeterminate"===e.mode),i.Db("viewBox",e._getViewBox()),i.Cb(1),i.lc("ngSwitchCase",!0),i.Cb(1),i.lc("ngSwitchCase",!1))},directives:[c.o,c.p],styles:[g],encapsulation:2,changeDetection:0}),e._diameters=new WeakMap,e}(),y=function(){var e=function(e){t(o,e);var n=r(o);function o(t,e,r,i,s){var c;return a(this,o),(c=n.call(this,t,e,r,i,s)).mode="indeterminate",c}return o}(k);return e.\u0275fac=function(t){return new(t||e)(i.Ob(i.l),i.Ob(f.a),i.Ob(c.d,8),i.Ob(m.a,8),i.Ob(v))},e.\u0275cmp=i.Ib({type:e,selectors:[["mat-spinner"]],hostAttrs:["role","progressbar","mode","indeterminate",1,"mat-spinner","mat-progress-spinner"],hostVars:6,hostBindings:function(t,e){2&t&&(i.vc("width",e.diameter,"px")("height",e.diameter,"px"),i.Gb("_mat-animation-noopable",e._noopAnimations))},inputs:{color:"color"},features:[i.zb],decls:3,vars:8,consts:[["preserveAspectRatio","xMidYMid meet","focusable","false",3,"ngSwitch"],["cx","50%","cy","50%",3,"animation-name","stroke-dashoffset","stroke-dasharray","stroke-width",4,"ngSwitchCase"],["cx","50%","cy","50%",3,"stroke-dashoffset","stroke-dasharray","stroke-width",4,"ngSwitchCase"],["cx","50%","cy","50%"]],template:function(t,e){1&t&&(i.ec(),i.Ub(0,"svg",0),i.yc(1,p,1,9,"circle",1),i.yc(2,b,1,7,"circle",2),i.Tb()),2&t&&(i.vc("width",e.diameter,"px")("height",e.diameter,"px"),i.lc("ngSwitch","indeterminate"===e.mode),i.Db("viewBox",e._getViewBox()),i.Cb(1),i.lc("ngSwitchCase",!0),i.Cb(1),i.lc("ngSwitchCase",!1))},directives:[c.o,c.p],styles:[g],encapsulation:2,changeDetection:0}),e}(),S=function(){var t=function t(){a(this,t)};return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=i.Mb({type:t}),t.\u0275inj=i.Lb({imports:[[u.g,c.c],u.g]}),t}()},lJTT:function(t,e,r){"use strict";r.r(e),r.d(e,"FormDemoModule",function(){return ot});var n=r("ofXK"),o=r("3Pt+"),i=r("bTqV"),c=r("Wp6s"),u=r("bSwM"),d=r("kmnG"),f=r("qFsG"),m=r("d3UM"),l=r("tyNb"),h=r("quSY"),p=r("2Vo4"),b=r("/uUt"),g=r("fXoL"),_=r("hG+b"),v=r("NFeN"),k=r("vE+j"),y=r("sdOP"),S=["errorCardWrapper"];function w(t,e){if(1&t&&(g.Ub(0,"ps-block-ui",7),g.jc(1),g.Tb()),2&t){var r=g.fc(2);g.lc("blocked",r.contentBlocked)}}function C(t,e){if(1&t&&(g.Ub(0,"mat-icon",10),g.Ac(1),g.Tb()),2&t){var r=g.fc(3);g.Cb(1),g.Bc(r.exception.icon)}}function x(t,e){if(1&t&&(g.Ub(0,"mat-card",8),g.yc(1,C,2,1,"mat-icon",9),g.Ub(2,"span"),g.Ac(3),g.gc(4,"psErrorMessage"),g.Tb(),g.Tb()),2&t){var r=g.fc(2);g.Gb("ps-form__error-container--center",r.exception.alignCenter),g.Cb(1),g.lc("ngIf",r.exception.icon),g.Cb(2),g.Bc(g.hc(4,4,r.exception.errorObject))}}function T(t,e){if(1&t&&(g.Ub(0,"mat-icon"),g.Ac(1),g.Tb()),2&t){var r=g.fc().$implicit;g.Cb(1),g.Bc(r.icon)}}function E(t,e){if(1&t&&(g.Ub(0,"button",17),g.bc("click",function(){return e.$implicit.click()}),g.yc(1,T,2,1,"mat-icon",18),g.Ac(2),g.Tb()),2&t){var r=e.$implicit;g.Gb("mat-raised-button","raised"===r.type)("mat-stroked-button","stroked"===r.type)("mat-icon-button","icon"===r.type),g.lc("color",r.color)("disabled",r.disabled&&r.disabled()),g.Cb(1),g.lc("ngIf",r.icon),g.Cb(1),g.Cc(" ",r.label," ")}}function A(t,e){if(1&t&&(g.Ub(0,"mat-card",11),g.Ub(1,"div",12),g.Pb(2,"ps-form-errors",13),g.Pb(3,"div",14),g.Ub(4,"div",15),g.jc(5,1),g.yc(6,E,3,10,"button",16),g.Tb(),g.Tb(),g.Tb()),2&t){var r=g.fc(2);g.Gb("ps-form__savebar--sticky",r.savebarSticky),g.Cb(2),g.lc("form",r.form),g.Cb(4),g.lc("ngForOf",r.buttons)}}function O(t,e){if(1&t&&(g.Ub(0,"form",1),g.Ub(1,"div",2),g.yc(2,w,2,1,"ps-block-ui",3),g.Ub(3,"div",null,4),g.yc(5,x,5,6,"mat-card",5),g.Tb(),g.Tb(),g.yc(6,A,7,4,"mat-card",6),g.Tb()),2&t){var r=g.fc();g.lc("formGroup",r.form)("autocomplete",r.autocomplete),g.Cb(2),g.lc("ngIf",r.contentVisible),g.Cb(1),g.vc("display",r.exception?"block":"none"),g.Cb(2),g.lc("ngIf",r.exception),g.Cb(1),g.lc("ngIf",!r.savebarHidden)}}var U,D,V=["*",[["","psFormSavebarButtons",""]]],M=["*","[psFormSavebarButtons]"],I={IntersectionObserver:IntersectionObserver},R=((U=function(){function t(e){a(this,t),this.cd=e,this._dataSourceSub=h.a.EMPTY,this._viewReady=!1,this._errrorInView$=new p.a(!1)}return s(t,[{key:"dataSource",get:function(){return this._dataSource},set:function(t){this._dataSource&&(this._dataSource.disconnect(),this._dataSourceSub.unsubscribe()),this._dataSource=t,this.updateErrorCardObserver(),this._dataSource&&this.activateDataSource()}},{key:"autocomplete",get:function(){return this.dataSource.autocomplete}},{key:"form",get:function(){return this.dataSource.form}},{key:"buttons",get:function(){return this.dataSource.buttons}},{key:"savebarMode",get:function(){return this.dataSource.savebarMode||"auto"}},{key:"savebarHidden",get:function(){return"hide"===this.savebarMode}},{key:"savebarSticky",get:function(){return"auto"===this.savebarMode?this.form.dirty||this.form.touched:"sticky"===this.savebarMode}},{key:"contentVisible",get:function(){return this.dataSource.contentVisible}},{key:"contentBlocked",get:function(){return this.dataSource.contentBlocked}},{key:"exception",get:function(){return this.dataSource.exception}},{key:"ngAfterViewInit",value:function(){this._viewReady=!0,this.updateErrorCardObserver(),this.activateDataSource()}},{key:"ngOnDestroy",value:function(){this._errorCardObserver&&(this._errorCardObserver.disconnect(),this._errorCardObserver=null),this._errrorInView$.complete(),this._dataSourceSub.unsubscribe(),this._dataSource&&this._dataSource.disconnect()}},{key:"activateDataSource",value:function(){var t=this;if(this._viewReady&&this._dataSource){var e={errorInView$:this._errrorInView$.pipe(Object(b.a)()),scrollToError:function(){t.errorCardWrapper.nativeElement.scrollIntoView({behavior:"smooth"})}};this._dataSourceSub=this._dataSource.connect(e).subscribe(function(){t.cd.markForCheck()})}}},{key:"updateErrorCardObserver",value:function(){var t=this;!this._errorCardObserver&&this._dataSource&&this._viewReady?(this._errorCardObserver=new I.IntersectionObserver(function(e,r){t._errrorInView$.next(e[0].intersectionRatio>0),t.cd.markForCheck()},{root:null,rootMargin:"-100px",threshold:0}),this._errorCardObserver.observe(this.errorCardWrapper.nativeElement)):this._errorCardObserver&&!this._dataSource&&(this._errorCardObserver.disconnect(),this._errorCardObserver=null)}}]),t}()).\u0275fac=function(t){return new(t||U)(g.Ob(g.h))},U.\u0275cmp=g.Ib({type:U,selectors:[["ps-form"]],viewQuery:function(t,e){var r;1&t&&g.Ec(S,1),2&t&&g.pc(r=g.cc())&&(e.errorCardWrapper=r.first)},inputs:{dataSource:"dataSource"},ngContentSelectors:M,decls:1,vars:1,consts:[["class","ps-form__main-container",3,"formGroup","autocomplete",4,"ngIf"],[1,"ps-form__main-container",3,"formGroup","autocomplete"],[1,"ps-form__cards-container"],[3,"blocked",4,"ngIf"],["errorCardWrapper",""],["class","ps-form__error-container",3,"ps-form__error-container--center",4,"ngIf"],["class","ps-form__savebar",3,"ps-form__savebar--sticky",4,"ngIf"],[3,"blocked"],[1,"ps-form__error-container"],["class","ps-form__error-icon",4,"ngIf"],[1,"ps-form__error-icon"],[1,"ps-form__savebar"],[1,"ps-form__savebar-container"],[3,"form"],[1,"ps-form__savebar-spacer"],[1,"ps-form__buttons"],["mat-button","","type","button",3,"mat-raised-button","mat-stroked-button","mat-icon-button","color","disabled","click",4,"ngFor","ngForOf"],["mat-button","","type","button",3,"color","disabled","click"],[4,"ngIf"]],template:function(t,e){1&t&&(g.kc(V),g.yc(0,O,7,7,"form",0)),2&t&&g.lc("ngIf",e.dataSource)},directives:[n.m,o.v,o.o,o.i,_.a,c.a,v.a,k.a,n.l,i.a],pipes:[y.a],styles:[".ps-form__main-container{box-sizing:border-box}.ps-form__cards-container{display:grid;grid-gap:1em}mat-card.ps-form__error-container{color:var(--ps-error)}mat-card.ps-form__error-container--center{display:grid;justify-items:center}mat-icon.ps-form__error-icon{color:var(--ps-error);font-size:72px;height:72px;width:72px}.ps-form__buttons button{margin:.25em}.ps-form__error-notfier-button{vertical-align:middle;cursor:pointer}.ps-form__savebar{bottom:-1px;margin:1em 0;z-index:5;padding:1em!important;display:flex;justify-content:space-between;border-top:5px solid var(--ps-accent)}mat-card.ps-form__savebar--sticky{position:sticky}.ps-form__savebar-container{display:flex;flex-wrap:wrap;justify-content:flex-end;margin:-.25em;width:100%}.ps-form__savebar-container button{margin:.25em}.ps-form__savebar-spacer{margin-right:auto}@media only screen and (max-width:35em){mat-card.ps-form__savebar--sticky{position:static}}"],encapsulation:2,changeDetection:0}),U),L=r("LnVl"),j=r("GOp4"),B=r("VovW"),P=((D=function t(){a(this,t)}).\u0275fac=function(t){return new(t||D)},D.\u0275mod=g.Mb({type:D}),D.\u0275inj=g.Lb({imports:[[n.c,o.s,c.e,v.b,i.b,L.a,B.a,j.a]]}),D),N=r("tCYI"),W=r("f15B"),$=r("BrW1"),X=r("FKr1"),F=r("XNiG"),G=r("LRne"),z=r("IzEk"),q=r("3E0/"),Y=r("lJxs"),J=r("vkgz");function K(t,e){if(1&t&&(g.Ub(0,"div",13),g.Ac(1),g.gc(2,"json"),g.Tb()),2&t){var r=e.$implicit;g.Cb(1),g.Bc(g.hc(2,1,r))}}var H,Q=function(){function t(e){var r=this;a(this,t),this.options=e,this.autocomplete="off",this.buttons=[],this._originalData=null,this._loading=!1,this._hasLoadError=!1,this._saving=!1,this._blockView=!1,this._isEditMode=!1,this._errorInView=!1,this.stateChanges$=new F.a,this._loadParams=null,this.buttonDefs={scrollToError:{type:"icon",icon:"error_outline",color:"warn",click:function(){return r._scrollToError()}},edit:{label:"bearbeiten",type:"raised",color:"primary",disabled:function(){return r.contentBlocked},click:function(){return r.edit()}},save:{label:"speichern",type:"raised",color:"primary",disabled:function(){return r.contentBlocked||!r.form.valid},click:function(){return r.save()}},cancel:{label:"cancel",type:"stroked",color:null,disabled:function(){return!1},click:function(){return r.reset()}}},this._loadingSub=h.a.EMPTY,this._connectSub=h.a.EMPTY,this._errorInViewSub=h.a.EMPTY}return s(t,[{key:"form",get:function(){return this.options.form}},{key:"contentVisible",get:function(){return!this._hasLoadError}},{key:"contentBlocked",get:function(){return this._loading||this._saving||this._blockView}},{key:"savebarMode",get:function(){return this._hasLoadError?"hide":"auto"}},{key:"connect",value:function(t){var e=this;return this._scrollToError=function(){return setTimeout(function(){return t.scrollToError()},0)},this._errorInViewSub=t.errorInView$.subscribe(function(t){e._errorInView=t,e.updateButtons(),e.stateChanges$.next()}),this._connectSub=this.options.loadTrigger$.subscribe(function(t){e._loadParams=t,e.loadData(t)}),this.stateChanges$}},{key:"disconnect",value:function(){this._connectSub.unsubscribe(),this._errorInViewSub.unsubscribe(),this._loadingSub.unsubscribe()}},{key:"setViewBlocked",value:function(t){this._blockView=t,this.stateChanges$.next()}},{key:"edit",value:function(){this.setEditMode(!0)}},{key:"save",value:function(){var t=this;this._saving=!0,this.exception=null,this.stateChanges$.next();var e=this.form.getRawValue();this.options.saveFn(e,this._loadParams).pipe(Object(z.a)(1)).subscribe({next:function(e){t.markDataSaved(),t.setEditMode(!1),t._saving=!1,t.stateChanges$.next()},error:function(e){t._saving=!1,t.exception={errorObject:e},t._errorInView||t._scrollToError(),t.updateButtons(),t.stateChanges$.next()}})}},{key:"reset",value:function(){this.resetData(),this.setEditMode(!1),this.stateChanges$.next()}},{key:"loadData",value:function(t){var e=this;this._loadingSub.unsubscribe(),this._loading=!0,this._hasLoadError=!1,this.exception=null,this.initializeData(null),this.setEditMode(!1),this.stateChanges$.next(),this._loadingSub=this.options.loadFn(t).pipe(Object(z.a)(1)).subscribe({next:function(t){e.initializeData(t),e._loading=!1,e.stateChanges$.next()},error:function(t){e._loading=!1,e._hasLoadError=!0,e.exception={errorObject:t,alignCenter:!0,icon:"sentiment_very_dissatisfied"},e.stateChanges$.next()}})}},{key:"initializeData",value:function(t){null==t?this.form.reset():this.form.patchValue(t),this.markDataSaved()}},{key:"markDataSaved",value:function(){this._originalData=this.form.getRawValue(),this.form.markAsPristine(),this.form.markAsUntouched()}},{key:"resetData",value:function(){this.form.patchValue(this._originalData),this.form.markAsPristine(),this.form.markAsUntouched()}},{key:"setEditMode",value:function(t){this._isEditMode=t,t?this.form.enable():this.form.disable(),this.updateButtons()}},{key:"updateButtons",value:function(){this.buttons=[],this.contentVisible&&(this._isEditMode?(this.exception&&!this._errorInView&&this.buttons.push(this.buttonDefs.scrollToError),this.buttons.push(this.buttonDefs.save),this.buttons.push(this.buttonDefs.cancel)):this.buttons.push(this.buttonDefs.edit))}}]),t}(),Z=((H=function(){function t(){var e=this;a(this,t),this.loadError=!1,this.saveError=!1,this.form=new o.h({input1:new o.e("a"),input2:new o.e("b")},[function(t){return t.value.input1===t.value.input2?null:{equal:"input1 and input2 must be equal"}}]),this.counter=0,this.loadTrigger$=new p.a(this.counter),this.logs=[],this.dataSource=new Q({form:this.form,loadTrigger$:this.loadTrigger$,loadFn:function(t){return e.logs.push({type:"load",params:t}),Object(G.a)({input1:"input 1 load count "+t,input2:"input 2 load count "+t}).pipe(Object(q.a)(1e3),Object(Y.a)(function(t){if(e.loadError)throw new Error("this is the server error (loading)");return t}))},saveFn:function(t,r){return e.logs.push({type:"save",data:t,params:r}),Object(G.a)(null).pipe(Object(q.a)(1e3),Object(J.a)(function(t){if(e.saveError)throw new Error("this is the server error (saving)");return t}))}})}return s(t,[{key:"reload",value:function(){this.loadTrigger$.next(++this.counter)}}]),t}()).\u0275fac=function(t){return new(t||H)},H.\u0275cmp=g.Ib({type:H,selectors:[["app-form-data-source-demo"]],decls:28,vars:5,consts:[[1,"app-form-data-source-demo__settings"],[3,"ngModel","ngModelChange"],["mat-flat-button","","type","button","color","accent",3,"click"],[1,"app-form-data-source-demo__grid"],[3,"dataSource"],[3,"formGroup"],["type","text","matInput","","formControlName","input1"],["type","text","matInput","","formControlName","input2"],[2,"height","500px","margin-top","1em"],["psFormSavebarButtons",""],["mat-stroked-button","","type","button"],[1,"app-form-data-source-demo__logs"],["class","app-form-data-source-demo__log-item",4,"ngFor","ngForOf"],[1,"app-form-data-source-demo__log-item"]],template:function(t,e){1&t&&(g.Ub(0,"mat-card",0),g.Ub(1,"mat-checkbox",1),g.bc("ngModelChange",function(t){return e.loadError=t}),g.Ac(2,"load error"),g.Tb(),g.Ub(3,"mat-checkbox",1),g.bc("ngModelChange",function(t){return e.saveError=t}),g.Ac(4,"save error"),g.Tb(),g.Ub(5,"button",2),g.bc("click",function(){return e.reload()}),g.Ac(6,"reload"),g.Tb(),g.Tb(),g.Ub(7,"div",3),g.Ub(8,"ps-form",4),g.Ub(9,"mat-card"),g.Ub(10,"form",5),g.Ub(11,"mat-form-field"),g.Ub(12,"mat-label"),g.Ac(13,"Input 1"),g.Tb(),g.Pb(14,"input",6),g.Tb(),g.Ub(15,"mat-form-field"),g.Ub(16,"mat-label"),g.Ac(17,"Input 2"),g.Tb(),g.Pb(18,"input",7),g.Tb(),g.Tb(),g.Tb(),g.Ub(19,"mat-card",8),g.Ac(20,"dummy card"),g.Tb(),g.Sb(21,9),g.Ub(22,"button",10),g.Ac(23,"dummy button 1"),g.Tb(),g.Ub(24,"button",10),g.Ac(25,"dummy button 2"),g.Tb(),g.Rb(),g.Tb(),g.Ub(26,"mat-card",11),g.yc(27,K,3,3,"div",12),g.Tb(),g.Tb()),2&t&&(g.Cb(1),g.lc("ngModel",e.loadError),g.Cb(2),g.lc("ngModel",e.saveError),g.Cb(5),g.lc("dataSource",e.dataSource),g.Cb(2),g.lc("formGroup",e.form),g.Cb(17),g.lc("ngForOf",e.logs))},directives:[c.a,u.a,o.n,o.q,i.a,R,o.v,o.o,o.i,d.d,d.h,f.a,o.c,o.g,n.l],pipes:[n.g],styles:["\n      .app-form-data-source-demo__settings {\n        margin-bottom: 1em;\n      }\n\n      .app-form-data-source-demo__settings mat-checkbox {\n        margin: 1em;\n      }\n\n      .app-form-data-source-demo__grid {\n        display: grid;\n        grid-template-columns: 2fr 1fr;\n        grid-gap: 1em;\n      }\n\n      .app-form-data-source-demo__log-item {\n        margin-bottom: 0.25em;\n        padding-bottom: 0.25em;\n        border-bottom: 1px solid #ccc;\n        font-size: 0.95em;\n      }\n\n      app-form-demo .mat-form-field {\n        display: block;\n      }\n    "],encapsulation:2,changeDetection:0}),H);function tt(t,e){1&t&&g.Pb(0,"app-form-data-source-demo")}var et,rt=((et=function t(){a(this,t),this.demoType="dataSource"}).\u0275fac=function(t){return new(t||et)},et.\u0275cmp=g.Ib({type:et,selectors:[["app-form-demo"]],decls:7,vars:4,consts:[[1,"app-form-demo__settings"],[3,"ngModel","ngModelChange"],[3,"value"],[3,"ngSwitch"],[4,"ngSwitchCase"]],template:function(t,e){1&t&&(g.Ub(0,"mat-card",0),g.Ub(1,"mat-form-field"),g.Ub(2,"mat-select",1),g.bc("ngModelChange",function(t){return e.demoType=t}),g.Ub(3,"mat-option",2),g.Ac(4,"dataSource"),g.Tb(),g.Tb(),g.Tb(),g.Tb(),g.Sb(5,3),g.yc(6,tt,1,0,"app-form-data-source-demo",4),g.Rb()),2&t&&(g.Cb(2),g.lc("ngModel",e.demoType),g.Cb(1),g.lc("value","dataSource"),g.Cb(2),g.lc("ngSwitch",e.demoType),g.Cb(1),g.lc("ngSwitchCase","dataSource"))},directives:[c.a,d.d,m.a,o.n,o.q,X.j,n.o,n.p,Z],styles:[".app-form-demo__settings[_ngcontent-%COMP%] {\n        margin-bottom: 1em;\n      }"],changeDetection:0}),et);r("n6RY");var nt,ot=((nt=function t(){a(this,t)}).\u0275fac=function(t){return new(t||nt)},nt.\u0275mod=g.Mb({type:nt}),nt.\u0275inj=g.Lb({imports:[[o.j,o.s,n.c,N.b.forRoot($.a),W.a,P,l.d.forChild([{path:"",component:rt}]),f.b,d.f,c.e,u.b,m.b,i.b]]}),nt)}}])}();