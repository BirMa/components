!function(){function t(e,n){return(t=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(e,n)}function e(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var o,r=i(t);if(e){var c=i(this).constructor;o=Reflect.construct(r,arguments,c)}else o=r.apply(this,arguments);return n(this,o)}}function n(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function i(t){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function c(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{BwBJ:function(n,i,r){"use strict";r.d(i,"a",(function(){return d}));var a=r("Efrr"),s=r("5uGe"),u=r("ryP2");function d(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.a,i=(e=t)instanceof Date&&!isNaN(+e)?+t-n.now():Math.abs(t);return function(t){return t.lift(new l(i,n))}}var l=function(){function t(e,n){o(this,t),this.delay=e,this.scheduler=n}return c(t,[{key:"call",value:function(t,e){return e.subscribe(new h(t,this.delay,this.scheduler))}}]),t}(),h=function(n){!function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&t(e,n)}(r,n);var i=e(r);function r(t,e,n){var c;return o(this,r),(c=i.call(this,t)).delay=e,c.scheduler=n,c.queue=[],c.active=!1,c.errored=!1,c}return c(r,[{key:"_schedule",value:function(t){this.active=!0,this.destination.add(t.schedule(r.dispatch,this.delay,{source:this,destination:this.destination,scheduler:t}))}},{key:"scheduleNotification",value:function(t){if(!0!==this.errored){var e=this.scheduler,n=new f(e.now()+this.delay,t);this.queue.push(n),!1===this.active&&this._schedule(e)}}},{key:"_next",value:function(t){this.scheduleNotification(u.a.createNext(t))}},{key:"_error",value:function(t){this.errored=!0,this.queue=[],this.destination.error(t),this.unsubscribe()}},{key:"_complete",value:function(){this.scheduleNotification(u.a.createComplete()),this.unsubscribe()}}],[{key:"dispatch",value:function(t){for(var e=t.source,n=e.queue,i=t.scheduler,o=t.destination;n.length>0&&n[0].time-i.now()<=0;)n.shift().notification.observe(o);if(n.length>0){var r=Math.max(0,n[0].time-i.now());this.schedule(t,r)}else this.unsubscribe(),e.active=!1}}]),r}(s.a),f=function t(e,n){o(this,t),this.time=e,this.notification=n}},IKhh:function(t,e,n){"use strict";n.r(e),n.d(e,"ViewDemoModule",(function(){return V}));var i=n("2kYt"),r=n("nIj0"),a=n("PBFl"),s=n("Meci"),u=n("+Tre"),d=n("sEIs"),l=n("bwdy"),h=n("EM62"),f=n("tUta"),b=n("bFHC"),p=n("7V4E");function g(t,e){if(1&t&&(h.Sb(0,"ps-block-ui",5),h.hc(1),h.Rb()),2&t){var n=h.dc(2);h.jc("blocked",n.contentBlocked)}}function _(t,e){if(1&t&&(h.Sb(0,"mat-icon",8),h.Ac(1),h.Rb()),2&t){var n=h.dc(3);h.Ab(1),h.Bc(n.exception.icon)}}function v(t,e){if(1&t&&(h.Sb(0,"mat-card",6),h.yc(1,_,2,1,"mat-icon",7),h.Sb(2,"span"),h.Ac(3),h.ec(4,"psErrorMessage"),h.Rb(),h.Rb()),2&t){var n=h.dc(2);h.Eb("ps-view__error-container--center",n.exception.alignCenter),h.Ab(1),h.jc("ngIf",n.exception.icon),h.Ab(2),h.Bc(h.fc(4,4,n.exception.errorObject))}}function m(t,e){if(1&t&&(h.Sb(0,"div",1),h.Sb(1,"div",2),h.yc(2,g,2,1,"ps-block-ui",3),h.yc(3,v,5,6,"mat-card",4),h.Rb(),h.Rb()),2&t){var n=h.dc();h.Ab(2),h.jc("ngIf",n.contentVisible),h.Ab(1),h.jc("ngIf",n.exception)}}var y,w,S=["*"],k=((y=function(){function t(e){o(this,t),this.cd=e,this._dataSourceSub=l.a.EMPTY}return c(t,[{key:"ngOnDestroy",value:function(){this._dataSourceSub.unsubscribe(),this._dataSource&&this._dataSource.disconnect()}},{key:"activateDataSource",value:function(){var t=this;this._dataSource&&(this._dataSourceSub=this._dataSource.connect().subscribe((function(){t.cd.markForCheck()})))}},{key:"dataSource",set:function(t){this._dataSource&&(this._dataSource.disconnect(),this._dataSourceSub.unsubscribe()),this._dataSource=t,this._dataSource&&this.activateDataSource()},get:function(){return this._dataSource}},{key:"contentVisible",get:function(){return this.dataSource.contentVisible}},{key:"contentBlocked",get:function(){return this.dataSource.contentBlocked}},{key:"exception",get:function(){return this.dataSource.exception}}]),t}()).\u0275fac=function(t){return new(t||y)(h.Mb(h.h))},y.\u0275cmp=h.Gb({type:y,selectors:[["ps-view"]],inputs:{dataSource:"dataSource"},ngContentSelectors:S,decls:1,vars:1,consts:[["class","ps-view__main-container",4,"ngIf"],[1,"ps-view__main-container"],[1,"ps-view__cards-container"],[3,"blocked",4,"ngIf"],["class","ps-view__error-container",3,"ps-view__error-container--center",4,"ngIf"],[3,"blocked"],[1,"ps-view__error-container"],["class","ps-view__error-icon",4,"ngIf"],[1,"ps-view__error-icon"]],template:function(t,e){1&t&&(h.ic(),h.yc(0,m,4,2,"div",0)),2&t&&h.jc("ngIf",e.dataSource)},directives:[i.m,f.a,s.a,b.a],pipes:[p.a],styles:[".ps-view__main-container{box-sizing:border-box}.ps-view__cards-container{display:grid;grid-gap:1em}mat-card.ps-view__error-container{color:var(--ps-error)}mat-card.ps-view__error-container--center{display:grid;justify-items:center}mat-icon.ps-view__error-icon{color:var(--ps-error);font-size:72px;height:72px;width:72px}"],encapsulation:2,changeDetection:0}),y),x=n("TqqQ"),j=n("aCbn"),O=((w=function t(){o(this,t)}).\u0275mod=h.Kb({type:w}),w.\u0275inj=h.Jb({factory:function(t){return new(t||w)},imports:[[i.c,s.c,b.b,x.a,j.a]]}),w),C=n("ZTXN"),R=n("C05f"),E=n("ROBh"),M=n("J+dc"),A=n("BwBJ"),P=n("YtkY");function B(t,e){if(1&t&&(h.Sb(0,"div",8),h.Ac(1),h.ec(2,"json"),h.Rb()),2&t){var n=e.$implicit;h.Ab(1),h.Bc(h.fc(2,1,n))}}var T,D,$=function(){function t(e){o(this,t),this.options=e,this._loading=!1,this._hasLoadError=!1,this._blockView=!1,this.stateChanges$=new C.a,this._loadingSub=l.a.EMPTY,this._connectSub=l.a.EMPTY}return c(t,[{key:"connect",value:function(){var t=this;return this._connectSub=this.options.loadTrigger$.subscribe((function(e){t.loadData(e)})),this.stateChanges$}},{key:"disconnect",value:function(){this._connectSub.unsubscribe(),this._loadingSub.unsubscribe()}},{key:"setViewBlocked",value:function(t){this._blockView=t,this.stateChanges$.next()}},{key:"loadData",value:function(t){var e=this;this._loadingSub.unsubscribe(),this._loading=!0,this._hasLoadError=!1,this.exception=null,this.stateChanges$.next(),this._loadingSub=this.options.loadFn(t).pipe(Object(M.a)(1)).subscribe({next:function(){e._loading=!1,e.stateChanges$.next()},error:function(t){e._loading=!1,e._hasLoadError=!0,e.exception={errorObject:t,alignCenter:!0,icon:"sentiment_very_dissatisfied"},e.stateChanges$.next()}})}},{key:"contentVisible",get:function(){return!this._hasLoadError}},{key:"contentBlocked",get:function(){return this._loading||this._blockView}}]),t}(),I=((D=function(){function t(){var e=this;o(this,t),this.loadError=!1,this.counter=0,this.logs=[],this.loadTrigger$=new R.a(this.counter),this.dataSource=new $({loadTrigger$:this.loadTrigger$,loadFn:function(t){return e.logs.push({type:"load",params:t}),Object(E.a)({loadCount:t,time:new Date}).pipe(Object(A.a)(1e3),Object(P.a)((function(t){if(e.loadError)throw new Error("this is the server error (loading)");return e.item=t,t})))}})}return c(t,[{key:"reload",value:function(){this.loadTrigger$.next(++this.counter)}}]),t}()).\u0275fac=function(t){return new(t||D)},D.\u0275cmp=h.Gb({type:D,selectors:[["app-view-demo"]],decls:15,vars:6,consts:[[1,"app-view-data-source-demo__settings"],[3,"ngModel","ngModelChange"],["mat-flat-button","","type","button","color","accent",3,"click"],[1,"app-form-data-source-demo__grid"],[3,"dataSource"],[2,"height","500px","margin-top","1em"],[1,"app-view-data-source-demo__logs"],["class","app-view-data-source-demo__log-item",4,"ngFor","ngForOf"],[1,"app-view-data-source-demo__log-item"]],template:function(t,e){1&t&&(h.Sb(0,"mat-card",0),h.Sb(1,"mat-checkbox",1),h.Zb("ngModelChange",(function(t){return e.loadError=t})),h.Ac(2,"load error"),h.Rb(),h.Sb(3,"button",2),h.Zb("click",(function(){return e.reload()})),h.Ac(4,"reload"),h.Rb(),h.Rb(),h.Sb(5,"div",3),h.Sb(6,"ps-view",4),h.Sb(7,"mat-card"),h.Sb(8,"pre"),h.Ac(9),h.ec(10,"json"),h.Rb(),h.Rb(),h.Sb(11,"mat-card",5),h.Ac(12,"dummy card"),h.Rb(),h.Rb(),h.Sb(13,"mat-card",6),h.yc(14,B,3,3,"div",7),h.Rb(),h.Rb()),2&t&&(h.Ab(1),h.jc("ngModel",e.loadError),h.Ab(5),h.jc("dataSource",e.dataSource),h.Ab(3),h.Bc(h.fc(10,4,e.item)),h.Ab(5),h.jc("ngForOf",e.logs))},directives:[s.a,u.a,r.n,r.q,a.a,k,i.l],pipes:[i.g],styles:[".app-view-data-source-demo__settings[_ngcontent-%COMP%] {\n        margin-bottom: 1em;\n      }\n\n      .app-view-data-source-demo__settings[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%] {\n        margin: 1em;\n      }\n\n      .app-view-data-source-demo__grid[_ngcontent-%COMP%] {\n        display: grid;\n        grid-template-columns: 2fr 1fr;\n        grid-gap: 1em;\n      }\n\n      .app-view-data-source-demo__logs[_ngcontent-%COMP%] {\n        margin-top: 1em;\n      }\n\n      .app-view-data-source-demo__log-item[_ngcontent-%COMP%] {\n        margin-bottom: 0.25em;\n        padding-bottom: 0.25em;\n        border-bottom: 1px solid #ccc;\n        font-size: 0.95em;\n      }"],changeDetection:0}),D),V=((T=function t(){o(this,t)}).\u0275mod=h.Kb({type:T}),T.\u0275inj=h.Jb({factory:function(t){return new(t||T)},imports:[[r.j,i.c,d.d.forChild([{path:"",component:I}]),s.c,u.b,a.b,O]]}),T)}}])}();