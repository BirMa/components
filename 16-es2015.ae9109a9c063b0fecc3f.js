(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{"3E0/":function(t,e,r){"use strict";r.d(e,"a",function(){return i});var o=r("D0XW"),s=r("7o/Q"),a=r("WMd4");function i(t,e=o.a){var r;const s=(r=t)instanceof Date&&!isNaN(+r)?+t-e.now():Math.abs(t);return t=>t.lift(new n(s,e))}class n{constructor(t,e){this.delay=t,this.scheduler=e}call(t,e){return e.subscribe(new c(t,this.delay,this.scheduler))}}class c extends s.a{constructor(t,e,r){super(t),this.delay=e,this.scheduler=r,this.queue=[],this.active=!1,this.errored=!1}static dispatch(t){const e=t.source,r=e.queue,o=t.scheduler,s=t.destination;for(;r.length>0&&r[0].time-o.now()<=0;)r.shift().notification.observe(s);if(r.length>0){const e=Math.max(0,r[0].time-o.now());this.schedule(t,e)}else this.unsubscribe(),e.active=!1}_schedule(t){this.active=!0,this.destination.add(t.schedule(c.dispatch,this.delay,{source:this,destination:this.destination,scheduler:t}))}scheduleNotification(t){if(!0===this.errored)return;const e=this.scheduler,r=new d(e.now()+this.delay,t);this.queue.push(r),!1===this.active&&this._schedule(e)}_next(t){this.scheduleNotification(a.a.createNext(t))}_error(t){this.errored=!0,this.queue=[],this.destination.error(t),this.unsubscribe()}_complete(){this.scheduleNotification(a.a.createComplete()),this.unsubscribe()}}class d{constructor(t,e){this.time=t,this.notification=e}}},Xa2L:function(t,e,r){"use strict";r.d(e,"a",function(){return k}),r.d(e,"b",function(){return _});var o=r("fXoL"),s=r("ofXK"),a=r("FKr1"),i=r("8LU1"),n=r("nLfN"),c=r("R1ws");function d(t,e){if(1&t&&(o.ec(),o.Pb(0,"circle",3)),2&t){const t=o.fc();o.vc("animation-name","mat-progress-spinner-stroke-rotate-"+t._spinnerAnimationLabel)("stroke-dashoffset",t._getStrokeDashOffset(),"px")("stroke-dasharray",t._getStrokeCircumference(),"px")("stroke-width",t._getCircleStrokeWidth(),"%"),o.Db("r",t._getCircleRadius())}}function m(t,e){if(1&t&&(o.ec(),o.Pb(0,"circle",3)),2&t){const t=o.fc();o.vc("stroke-dashoffset",t._getStrokeDashOffset(),"px")("stroke-dasharray",t._getStrokeCircumference(),"px")("stroke-width",t._getCircleStrokeWidth(),"%"),o.Db("r",t._getCircleRadius())}}function h(t,e){if(1&t&&(o.ec(),o.Pb(0,"circle",3)),2&t){const t=o.fc();o.vc("animation-name","mat-progress-spinner-stroke-rotate-"+t._spinnerAnimationLabel)("stroke-dashoffset",t._getStrokeDashOffset(),"px")("stroke-dasharray",t._getStrokeCircumference(),"px")("stroke-width",t._getCircleStrokeWidth(),"%"),o.Db("r",t._getCircleRadius())}}function l(t,e){if(1&t&&(o.ec(),o.Pb(0,"circle",3)),2&t){const t=o.fc();o.vc("stroke-dashoffset",t._getStrokeDashOffset(),"px")("stroke-dasharray",t._getStrokeCircumference(),"px")("stroke-width",t._getCircleStrokeWidth(),"%"),o.Db("r",t._getCircleRadius())}}const u=".mat-progress-spinner{display:block;position:relative;overflow:hidden}.mat-progress-spinner svg{position:absolute;transform:rotate(-90deg);top:0;left:0;transform-origin:center;overflow:visible}.mat-progress-spinner circle{fill:transparent;transform-origin:center;transition:stroke-dashoffset 225ms linear}._mat-animation-noopable.mat-progress-spinner circle{transition:none;animation:none}.cdk-high-contrast-active .mat-progress-spinner circle{stroke:currentColor}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] svg{animation:mat-progress-spinner-linear-rotate 2000ms linear infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] svg{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition-property:stroke;animation-duration:4000ms;animation-timing-function:cubic-bezier(0.35, 0, 0.25, 1);animation-iteration-count:infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-fallback-animation[mode=indeterminate] svg{animation:mat-progress-spinner-stroke-rotate-fallback 10000ms cubic-bezier(0.87, 0.03, 0.33, 1) infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-fallback-animation[mode=indeterminate] svg{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-fallback-animation[mode=indeterminate] circle{transition-property:stroke}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-fallback-animation[mode=indeterminate] circle{transition:none;animation:none}@keyframes mat-progress-spinner-linear-rotate{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes mat-progress-spinner-stroke-rotate-100{0%{stroke-dashoffset:268.606171575px;transform:rotate(0)}12.5%{stroke-dashoffset:56.5486677px;transform:rotate(0)}12.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(72.5deg)}25%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(72.5deg)}25.0001%{stroke-dashoffset:268.606171575px;transform:rotate(270deg)}37.5%{stroke-dashoffset:56.5486677px;transform:rotate(270deg)}37.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(161.5deg)}50%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(161.5deg)}50.0001%{stroke-dashoffset:268.606171575px;transform:rotate(180deg)}62.5%{stroke-dashoffset:56.5486677px;transform:rotate(180deg)}62.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(251.5deg)}75%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(251.5deg)}75.0001%{stroke-dashoffset:268.606171575px;transform:rotate(90deg)}87.5%{stroke-dashoffset:56.5486677px;transform:rotate(90deg)}87.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(341.5deg)}100%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(341.5deg)}}@keyframes mat-progress-spinner-stroke-rotate-fallback{0%{transform:rotate(0deg)}25%{transform:rotate(1170deg)}50%{transform:rotate(2340deg)}75%{transform:rotate(3510deg)}100%{transform:rotate(4680deg)}}\n";class p{constructor(t){this._elementRef=t}}const f=Object(a.s)(p,"primary"),b=new o.s("mat-progress-spinner-default-options",{providedIn:"root",factory:function(){return{diameter:100}}});let g=(()=>{class t extends f{constructor(e,r,o,s,a){super(e),this._elementRef=e,this._document=o,this._diameter=100,this._value=0,this._fallbackAnimation=!1,this.mode="determinate";const i=t._diameters;this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),i.has(o.head)||i.set(o.head,new Set([100])),this._fallbackAnimation=r.EDGE||r.TRIDENT,this._noopAnimations="NoopAnimations"===s&&!!a&&!a._forceAnimations,a&&(a.diameter&&(this.diameter=a.diameter),a.strokeWidth&&(this.strokeWidth=a.strokeWidth))}get diameter(){return this._diameter}set diameter(t){this._diameter=Object(i.f)(t),this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),!this._fallbackAnimation&&this._styleRoot&&this._attachStyleNode()}get strokeWidth(){return this._strokeWidth||this.diameter/10}set strokeWidth(t){this._strokeWidth=Object(i.f)(t)}get value(){return"determinate"===this.mode?this._value:0}set value(t){this._value=Math.max(0,Math.min(100,Object(i.f)(t)))}ngOnInit(){const t=this._elementRef.nativeElement;this._styleRoot=Object(n.c)(t)||this._document.head,this._attachStyleNode(),t.classList.add(`mat-progress-spinner-indeterminate${this._fallbackAnimation?"-fallback":""}-animation`)}_getCircleRadius(){return(this.diameter-10)/2}_getViewBox(){const t=2*this._getCircleRadius()+this.strokeWidth;return`0 0 ${t} ${t}`}_getStrokeCircumference(){return 2*Math.PI*this._getCircleRadius()}_getStrokeDashOffset(){return"determinate"===this.mode?this._getStrokeCircumference()*(100-this._value)/100:this._fallbackAnimation&&"indeterminate"===this.mode?.2*this._getStrokeCircumference():null}_getCircleStrokeWidth(){return this.strokeWidth/this.diameter*100}_attachStyleNode(){const e=this._styleRoot,r=this._diameter,o=t._diameters;let s=o.get(e);if(!s||!s.has(r)){const t=this._document.createElement("style");t.setAttribute("mat-spinner-animation",this._spinnerAnimationLabel),t.textContent=this._getAnimationText(),e.appendChild(t),s||(s=new Set,o.set(e,s)),s.add(r)}}_getAnimationText(){const t=this._getStrokeCircumference();return"\n @keyframes mat-progress-spinner-stroke-rotate-DIAMETER {\n    0%      { stroke-dashoffset: START_VALUE;  transform: rotate(0); }\n    12.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(0); }\n    12.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(72.5deg); }\n    25%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(72.5deg); }\n\n    25.0001%   { stroke-dashoffset: START_VALUE;  transform: rotate(270deg); }\n    37.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(270deg); }\n    37.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(161.5deg); }\n    50%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(161.5deg); }\n\n    50.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(180deg); }\n    62.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(180deg); }\n    62.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(251.5deg); }\n    75%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(251.5deg); }\n\n    75.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(90deg); }\n    87.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(90deg); }\n    87.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(341.5deg); }\n    100%    { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(341.5deg); }\n  }\n".replace(/START_VALUE/g,""+.95*t).replace(/END_VALUE/g,""+.2*t).replace(/DIAMETER/g,`${this._spinnerAnimationLabel}`)}_getSpinnerAnimationLabel(){return this.diameter.toString().replace(".","_")}}return t.\u0275fac=function(e){return new(e||t)(o.Ob(o.l),o.Ob(n.a),o.Ob(s.d,8),o.Ob(c.a,8),o.Ob(b))},t.\u0275cmp=o.Ib({type:t,selectors:[["mat-progress-spinner"]],hostAttrs:["role","progressbar",1,"mat-progress-spinner"],hostVars:10,hostBindings:function(t,e){2&t&&(o.Db("aria-valuemin","determinate"===e.mode?0:null)("aria-valuemax","determinate"===e.mode?100:null)("aria-valuenow","determinate"===e.mode?e.value:null)("mode",e.mode),o.vc("width",e.diameter,"px")("height",e.diameter,"px"),o.Gb("_mat-animation-noopable",e._noopAnimations))},inputs:{color:"color",mode:"mode",diameter:"diameter",strokeWidth:"strokeWidth",value:"value"},exportAs:["matProgressSpinner"],features:[o.zb],decls:3,vars:8,consts:[["preserveAspectRatio","xMidYMid meet","focusable","false",3,"ngSwitch"],["cx","50%","cy","50%",3,"animation-name","stroke-dashoffset","stroke-dasharray","stroke-width",4,"ngSwitchCase"],["cx","50%","cy","50%",3,"stroke-dashoffset","stroke-dasharray","stroke-width",4,"ngSwitchCase"],["cx","50%","cy","50%"]],template:function(t,e){1&t&&(o.ec(),o.Ub(0,"svg",0),o.yc(1,d,1,9,"circle",1),o.yc(2,m,1,7,"circle",2),o.Tb()),2&t&&(o.vc("width",e.diameter,"px")("height",e.diameter,"px"),o.lc("ngSwitch","indeterminate"===e.mode),o.Db("viewBox",e._getViewBox()),o.Cb(1),o.lc("ngSwitchCase",!0),o.Cb(1),o.lc("ngSwitchCase",!1))},directives:[s.o,s.p],styles:[u],encapsulation:2,changeDetection:0}),t._diameters=new WeakMap,t})(),_=(()=>{class t extends g{constructor(t,e,r,o,s){super(t,e,r,o,s),this.mode="indeterminate"}}return t.\u0275fac=function(e){return new(e||t)(o.Ob(o.l),o.Ob(n.a),o.Ob(s.d,8),o.Ob(c.a,8),o.Ob(b))},t.\u0275cmp=o.Ib({type:t,selectors:[["mat-spinner"]],hostAttrs:["role","progressbar","mode","indeterminate",1,"mat-spinner","mat-progress-spinner"],hostVars:6,hostBindings:function(t,e){2&t&&(o.vc("width",e.diameter,"px")("height",e.diameter,"px"),o.Gb("_mat-animation-noopable",e._noopAnimations))},inputs:{color:"color"},features:[o.zb],decls:3,vars:8,consts:[["preserveAspectRatio","xMidYMid meet","focusable","false",3,"ngSwitch"],["cx","50%","cy","50%",3,"animation-name","stroke-dashoffset","stroke-dasharray","stroke-width",4,"ngSwitchCase"],["cx","50%","cy","50%",3,"stroke-dashoffset","stroke-dasharray","stroke-width",4,"ngSwitchCase"],["cx","50%","cy","50%"]],template:function(t,e){1&t&&(o.ec(),o.Ub(0,"svg",0),o.yc(1,h,1,9,"circle",1),o.yc(2,l,1,7,"circle",2),o.Tb()),2&t&&(o.vc("width",e.diameter,"px")("height",e.diameter,"px"),o.lc("ngSwitch","indeterminate"===e.mode),o.Db("viewBox",e._getViewBox()),o.Cb(1),o.lc("ngSwitchCase",!0),o.Cb(1),o.lc("ngSwitchCase",!1))},directives:[s.o,s.p],styles:[u],encapsulation:2,changeDetection:0}),t})(),k=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.Mb({type:t}),t.\u0275inj=o.Lb({imports:[[a.g,s.c],a.g]}),t})()},lJTT:function(t,e,r){"use strict";r.r(e),r.d(e,"FormDemoModule",function(){return H});var o=r("ofXK"),s=r("3Pt+"),a=r("bTqV"),i=r("Wp6s"),n=r("bSwM"),c=r("kmnG"),d=r("qFsG"),m=r("d3UM"),h=r("tyNb"),l=r("quSY"),u=r("2Vo4"),p=r("/uUt"),f=r("fXoL"),b=r("hG+b"),g=r("NFeN"),_=r("vE+j"),k=r("sdOP");const v=["errorCardWrapper"];function S(t,e){if(1&t&&(f.Ub(0,"ps-block-ui",7),f.jc(1),f.Tb()),2&t){const t=f.fc(2);f.lc("blocked",t.contentBlocked)}}function y(t,e){if(1&t&&(f.Ub(0,"mat-icon",10),f.Ac(1),f.Tb()),2&t){const t=f.fc(3);f.Cb(1),f.Bc(t.exception.icon)}}function w(t,e){if(1&t&&(f.Ub(0,"mat-card",8),f.yc(1,y,2,1,"mat-icon",9),f.Ub(2,"span"),f.Ac(3),f.gc(4,"psErrorMessage"),f.Tb(),f.Tb()),2&t){const t=f.fc(2);f.Gb("ps-form__error-container--center",t.exception.alignCenter),f.Cb(1),f.lc("ngIf",t.exception.icon),f.Cb(2),f.Bc(f.hc(4,4,t.exception.errorObject))}}function x(t,e){if(1&t&&(f.Ub(0,"mat-icon"),f.Ac(1),f.Tb()),2&t){const t=f.fc().$implicit;f.Cb(1),f.Bc(t.icon)}}function C(t,e){if(1&t&&(f.Ub(0,"button",17),f.bc("click",function(){return e.$implicit.click()}),f.yc(1,x,2,1,"mat-icon",18),f.Ac(2),f.Tb()),2&t){const t=e.$implicit;f.Gb("mat-raised-button","raised"===t.type)("mat-stroked-button","stroked"===t.type)("mat-icon-button","icon"===t.type),f.lc("color",t.color)("disabled",t.disabled&&t.disabled()),f.Cb(1),f.lc("ngIf",t.icon),f.Cb(1),f.Cc(" ",t.label," ")}}function T(t,e){if(1&t&&(f.Ub(0,"mat-card",11),f.Ub(1,"div",12),f.Pb(2,"ps-form-errors",13),f.Pb(3,"div",14),f.Ub(4,"div",15),f.jc(5,1),f.yc(6,C,3,10,"button",16),f.Tb(),f.Tb(),f.Tb()),2&t){const t=f.fc(2);f.Gb("ps-form__savebar--sticky",t.savebarSticky),f.Cb(2),f.lc("form",t.form),f.Cb(4),f.lc("ngForOf",t.buttons)}}function E(t,e){if(1&t&&(f.Ub(0,"form",1),f.Ub(1,"div",2),f.yc(2,S,2,1,"ps-block-ui",3),f.Ub(3,"div",null,4),f.yc(5,w,5,6,"mat-card",5),f.Tb(),f.Tb(),f.yc(6,T,7,4,"mat-card",6),f.Tb()),2&t){const t=f.fc();f.lc("formGroup",t.form)("autocomplete",t.autocomplete),f.Cb(2),f.lc("ngIf",t.contentVisible),f.Cb(1),f.vc("display",t.exception?"block":"none"),f.Cb(2),f.lc("ngIf",t.exception),f.Cb(1),f.lc("ngIf",!t.savebarHidden)}}const A=["*",[["","psFormSavebarButtons",""]]],U=["*","[psFormSavebarButtons]"],O={IntersectionObserver};let D=(()=>{class t{constructor(t){this.cd=t,this._dataSourceSub=l.a.EMPTY,this._viewReady=!1,this._errrorInView$=new u.a(!1)}set dataSource(t){this._dataSource&&(this._dataSource.disconnect(),this._dataSourceSub.unsubscribe()),this._dataSource=t,this.updateErrorCardObserver(),this._dataSource&&this.activateDataSource()}get dataSource(){return this._dataSource}get autocomplete(){return this.dataSource.autocomplete}get form(){return this.dataSource.form}get buttons(){return this.dataSource.buttons}get savebarMode(){return this.dataSource.savebarMode||"auto"}get savebarHidden(){return"hide"===this.savebarMode}get savebarSticky(){return"auto"===this.savebarMode?this.form.dirty||this.form.touched:"sticky"===this.savebarMode}get contentVisible(){return this.dataSource.contentVisible}get contentBlocked(){return this.dataSource.contentBlocked}get exception(){return this.dataSource.exception}ngAfterViewInit(){this._viewReady=!0,this.updateErrorCardObserver(),this.activateDataSource()}ngOnDestroy(){this._errorCardObserver&&(this._errorCardObserver.disconnect(),this._errorCardObserver=null),this._errrorInView$.complete(),this._dataSourceSub.unsubscribe(),this._dataSource&&this._dataSource.disconnect()}activateDataSource(){if(!this._viewReady||!this._dataSource)return;const t={errorInView$:this._errrorInView$.pipe(Object(p.a)()),scrollToError:()=>{this.errorCardWrapper.nativeElement.scrollIntoView({behavior:"smooth"})}};this._dataSourceSub=this._dataSource.connect(t).subscribe(()=>{this.cd.markForCheck()})}updateErrorCardObserver(){!this._errorCardObserver&&this._dataSource&&this._viewReady?(this._errorCardObserver=new O.IntersectionObserver((t,e)=>{this._errrorInView$.next(t[0].intersectionRatio>0),this.cd.markForCheck()},{root:null,rootMargin:"-100px",threshold:0}),this._errorCardObserver.observe(this.errorCardWrapper.nativeElement)):this._errorCardObserver&&!this._dataSource&&(this._errorCardObserver.disconnect(),this._errorCardObserver=null)}}return t.\u0275fac=function(e){return new(e||t)(f.Ob(f.h))},t.\u0275cmp=f.Ib({type:t,selectors:[["ps-form"]],viewQuery:function(t,e){if(1&t&&f.Ec(v,1),2&t){let t;f.pc(t=f.cc())&&(e.errorCardWrapper=t.first)}},inputs:{dataSource:"dataSource"},ngContentSelectors:U,decls:1,vars:1,consts:[["class","ps-form__main-container",3,"formGroup","autocomplete",4,"ngIf"],[1,"ps-form__main-container",3,"formGroup","autocomplete"],[1,"ps-form__cards-container"],[3,"blocked",4,"ngIf"],["errorCardWrapper",""],["class","ps-form__error-container",3,"ps-form__error-container--center",4,"ngIf"],["class","ps-form__savebar",3,"ps-form__savebar--sticky",4,"ngIf"],[3,"blocked"],[1,"ps-form__error-container"],["class","ps-form__error-icon",4,"ngIf"],[1,"ps-form__error-icon"],[1,"ps-form__savebar"],[1,"ps-form__savebar-container"],[3,"form"],[1,"ps-form__savebar-spacer"],[1,"ps-form__buttons"],["mat-button","","type","button",3,"mat-raised-button","mat-stroked-button","mat-icon-button","color","disabled","click",4,"ngFor","ngForOf"],["mat-button","","type","button",3,"color","disabled","click"],[4,"ngIf"]],template:function(t,e){1&t&&(f.kc(A),f.yc(0,E,7,7,"form",0)),2&t&&f.lc("ngIf",e.dataSource)},directives:[o.m,s.v,s.o,s.i,b.a,i.a,g.a,_.a,o.l,a.a],pipes:[k.a],styles:[".ps-form__main-container{box-sizing:border-box}.ps-form__cards-container{display:grid;grid-gap:1em}mat-card.ps-form__error-container{color:var(--ps-error)}mat-card.ps-form__error-container--center{display:grid;justify-items:center}mat-icon.ps-form__error-icon{color:var(--ps-error);font-size:72px;height:72px;width:72px}.ps-form__buttons button{margin:.25em}.ps-form__error-notfier-button{vertical-align:middle;cursor:pointer}.ps-form__savebar{bottom:-1px;margin:1em 0;z-index:5;padding:1em!important;display:flex;justify-content:space-between;border-top:5px solid var(--ps-accent)}mat-card.ps-form__savebar--sticky{position:sticky}.ps-form__savebar-container{display:flex;flex-wrap:wrap;justify-content:flex-end;margin:-.25em;width:100%}.ps-form__savebar-container button{margin:.25em}.ps-form__savebar-spacer{margin-right:auto}@media only screen and (max-width:35em){mat-card.ps-form__savebar--sticky{position:static}}"],encapsulation:2,changeDetection:0}),t})();var V=r("LnVl"),M=r("GOp4"),I=r("VovW");let L=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=f.Mb({type:t}),t.\u0275inj=f.Lb({imports:[[o.c,s.s,i.e,g.b,a.b,V.a,I.a,M.a]]}),t})();var R=r("tCYI"),$=r("f15B"),j=r("BrW1"),B=r("FKr1"),N=r("XNiG"),W=r("LRne"),P=r("IzEk"),X=r("3E0/"),F=r("lJxs"),G=r("vkgz");function z(t,e){if(1&t&&(f.Ub(0,"div",13),f.Ac(1),f.gc(2,"json"),f.Tb()),2&t){const t=e.$implicit;f.Cb(1),f.Bc(f.hc(2,1,t))}}class q{constructor(t){this.options=t,this.autocomplete="off",this.buttons=[],this._originalData=null,this._loading=!1,this._hasLoadError=!1,this._saving=!1,this._blockView=!1,this._isEditMode=!1,this._errorInView=!1,this.stateChanges$=new N.a,this._loadParams=null,this.buttonDefs={scrollToError:{type:"icon",icon:"error_outline",color:"warn",click:()=>this._scrollToError()},edit:{label:"bearbeiten",type:"raised",color:"primary",disabled:()=>this.contentBlocked,click:()=>this.edit()},save:{label:"speichern",type:"raised",color:"primary",disabled:()=>this.contentBlocked||!this.form.valid,click:()=>this.save()},cancel:{label:"cancel",type:"stroked",color:null,disabled:()=>!1,click:()=>this.reset()}},this._loadingSub=l.a.EMPTY,this._connectSub=l.a.EMPTY,this._errorInViewSub=l.a.EMPTY}get form(){return this.options.form}get contentVisible(){return!this._hasLoadError}get contentBlocked(){return this._loading||this._saving||this._blockView}get savebarMode(){return this._hasLoadError?"hide":"auto"}connect(t){return this._scrollToError=()=>setTimeout(()=>t.scrollToError(),0),this._errorInViewSub=t.errorInView$.subscribe(t=>{this._errorInView=t,this.updateButtons(),this.stateChanges$.next()}),this._connectSub=this.options.loadTrigger$.subscribe(t=>{this._loadParams=t,this.loadData(t)}),this.stateChanges$}disconnect(){this._connectSub.unsubscribe(),this._errorInViewSub.unsubscribe(),this._loadingSub.unsubscribe()}setViewBlocked(t){this._blockView=t,this.stateChanges$.next()}edit(){this.setEditMode(!0)}save(){this._saving=!0,this.exception=null,this.stateChanges$.next();const t=this.form.getRawValue();this.options.saveFn(t,this._loadParams).pipe(Object(P.a)(1)).subscribe({next:t=>{this.markDataSaved(),this.setEditMode(!1),this._saving=!1,this.stateChanges$.next()},error:t=>{this._saving=!1,this.exception={errorObject:t},this._errorInView||this._scrollToError(),this.updateButtons(),this.stateChanges$.next()}})}reset(){this.resetData(),this.setEditMode(!1),this.stateChanges$.next()}loadData(t){this._loadingSub.unsubscribe(),this._loading=!0,this._hasLoadError=!1,this.exception=null,this.initializeData(null),this.setEditMode(!1),this.stateChanges$.next(),this._loadingSub=this.options.loadFn(t).pipe(Object(P.a)(1)).subscribe({next:t=>{this.initializeData(t),this._loading=!1,this.stateChanges$.next()},error:t=>{this._loading=!1,this._hasLoadError=!0,this.exception={errorObject:t,alignCenter:!0,icon:"sentiment_very_dissatisfied"},this.stateChanges$.next()}})}initializeData(t){null==t?this.form.reset():this.form.patchValue(t),this.markDataSaved()}markDataSaved(){this._originalData=this.form.getRawValue(),this.form.markAsPristine(),this.form.markAsUntouched()}resetData(){this.form.patchValue(this._originalData),this.form.markAsPristine(),this.form.markAsUntouched()}setEditMode(t){this._isEditMode=t,t?this.form.enable():this.form.disable(),this.updateButtons()}updateButtons(){this.buttons=[],this.contentVisible&&(this._isEditMode?(this.exception&&!this._errorInView&&this.buttons.push(this.buttonDefs.scrollToError),this.buttons.push(this.buttonDefs.save),this.buttons.push(this.buttonDefs.cancel)):this.buttons.push(this.buttonDefs.edit))}}let Y=(()=>{class t{constructor(){this.loadError=!1,this.saveError=!1,this.form=new s.h({input1:new s.e("a"),input2:new s.e("b")},[t=>t.value.input1===t.value.input2?null:{equal:"input1 and input2 must be equal"}]),this.counter=0,this.loadTrigger$=new u.a(this.counter),this.logs=[],this.dataSource=new q({form:this.form,loadTrigger$:this.loadTrigger$,loadFn:t=>(this.logs.push({type:"load",params:t}),Object(W.a)({input1:"input 1 load count "+t,input2:"input 2 load count "+t}).pipe(Object(X.a)(1e3),Object(F.a)(t=>{if(this.loadError)throw new Error("this is the server error (loading)");return t}))),saveFn:(t,e)=>(this.logs.push({type:"save",data:t,params:e}),Object(W.a)(null).pipe(Object(X.a)(1e3),Object(G.a)(t=>{if(this.saveError)throw new Error("this is the server error (saving)");return t})))})}reload(){this.loadTrigger$.next(++this.counter)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=f.Ib({type:t,selectors:[["app-form-data-source-demo"]],decls:28,vars:5,consts:[[1,"app-form-data-source-demo__settings"],[3,"ngModel","ngModelChange"],["mat-flat-button","","type","button","color","accent",3,"click"],[1,"app-form-data-source-demo__grid"],[3,"dataSource"],[3,"formGroup"],["type","text","matInput","","formControlName","input1"],["type","text","matInput","","formControlName","input2"],[2,"height","500px","margin-top","1em"],["psFormSavebarButtons",""],["mat-stroked-button","","type","button"],[1,"app-form-data-source-demo__logs"],["class","app-form-data-source-demo__log-item",4,"ngFor","ngForOf"],[1,"app-form-data-source-demo__log-item"]],template:function(t,e){1&t&&(f.Ub(0,"mat-card",0),f.Ub(1,"mat-checkbox",1),f.bc("ngModelChange",function(t){return e.loadError=t}),f.Ac(2,"load error"),f.Tb(),f.Ub(3,"mat-checkbox",1),f.bc("ngModelChange",function(t){return e.saveError=t}),f.Ac(4,"save error"),f.Tb(),f.Ub(5,"button",2),f.bc("click",function(){return e.reload()}),f.Ac(6,"reload"),f.Tb(),f.Tb(),f.Ub(7,"div",3),f.Ub(8,"ps-form",4),f.Ub(9,"mat-card"),f.Ub(10,"form",5),f.Ub(11,"mat-form-field"),f.Ub(12,"mat-label"),f.Ac(13,"Input 1"),f.Tb(),f.Pb(14,"input",6),f.Tb(),f.Ub(15,"mat-form-field"),f.Ub(16,"mat-label"),f.Ac(17,"Input 2"),f.Tb(),f.Pb(18,"input",7),f.Tb(),f.Tb(),f.Tb(),f.Ub(19,"mat-card",8),f.Ac(20,"dummy card"),f.Tb(),f.Sb(21,9),f.Ub(22,"button",10),f.Ac(23,"dummy button 1"),f.Tb(),f.Ub(24,"button",10),f.Ac(25,"dummy button 2"),f.Tb(),f.Rb(),f.Tb(),f.Ub(26,"mat-card",11),f.yc(27,z,3,3,"div",12),f.Tb(),f.Tb()),2&t&&(f.Cb(1),f.lc("ngModel",e.loadError),f.Cb(2),f.lc("ngModel",e.saveError),f.Cb(5),f.lc("dataSource",e.dataSource),f.Cb(2),f.lc("formGroup",e.form),f.Cb(17),f.lc("ngForOf",e.logs))},directives:[i.a,n.a,s.n,s.q,a.a,D,s.v,s.o,s.i,c.d,c.h,d.a,s.c,s.g,o.l],pipes:[o.g],styles:["\n      .app-form-data-source-demo__settings {\n        margin-bottom: 1em;\n      }\n\n      .app-form-data-source-demo__settings mat-checkbox {\n        margin: 1em;\n      }\n\n      .app-form-data-source-demo__grid {\n        display: grid;\n        grid-template-columns: 2fr 1fr;\n        grid-gap: 1em;\n      }\n\n      .app-form-data-source-demo__log-item {\n        margin-bottom: 0.25em;\n        padding-bottom: 0.25em;\n        border-bottom: 1px solid #ccc;\n        font-size: 0.95em;\n      }\n\n      app-form-demo .mat-form-field {\n        display: block;\n      }\n    "],encapsulation:2,changeDetection:0}),t})();function J(t,e){1&t&&f.Pb(0,"app-form-data-source-demo")}let K=(()=>{class t{constructor(){this.demoType="dataSource"}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=f.Ib({type:t,selectors:[["app-form-demo"]],decls:7,vars:4,consts:[[1,"app-form-demo__settings"],[3,"ngModel","ngModelChange"],[3,"value"],[3,"ngSwitch"],[4,"ngSwitchCase"]],template:function(t,e){1&t&&(f.Ub(0,"mat-card",0),f.Ub(1,"mat-form-field"),f.Ub(2,"mat-select",1),f.bc("ngModelChange",function(t){return e.demoType=t}),f.Ub(3,"mat-option",2),f.Ac(4,"dataSource"),f.Tb(),f.Tb(),f.Tb(),f.Tb(),f.Sb(5,3),f.yc(6,J,1,0,"app-form-data-source-demo",4),f.Rb()),2&t&&(f.Cb(2),f.lc("ngModel",e.demoType),f.Cb(1),f.lc("value","dataSource"),f.Cb(2),f.lc("ngSwitch",e.demoType),f.Cb(1),f.lc("ngSwitchCase","dataSource"))},directives:[i.a,c.d,m.a,s.n,s.q,B.j,o.o,o.p,Y],styles:[".app-form-demo__settings[_ngcontent-%COMP%] {\n        margin-bottom: 1em;\n      }"],changeDetection:0}),t})();r("n6RY");let H=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=f.Mb({type:t}),t.\u0275inj=f.Lb({imports:[[s.j,s.s,o.c,R.b.forRoot(j.a),$.a,L,h.d.forChild([{path:"",component:K}]),d.b,c.f,i.e,n.b,m.b,a.b]]}),t})()}}]);