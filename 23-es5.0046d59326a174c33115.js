!function(){function e(t,n){return(e=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(t,n)}function t(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var o,r=i(e);if(t){var c=i(this).constructor;o=Reflect.construct(r,arguments,c)}else o=r.apply(this,arguments);return n(this,o)}}function n(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function c(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{BwBJ:function(n,i,r){"use strict";r.d(i,"a",(function(){return d}));var a=r("Efrr"),s=r("5uGe"),u=r("ryP2");function d(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.a,i=(t=e)instanceof Date&&!isNaN(+t)?+e-n.now():Math.abs(e);return function(e){return e.lift(new l(i,n))}}var l=function(){function e(t,n){o(this,e),this.delay=t,this.scheduler=n}return c(e,[{key:"call",value:function(e,t){return t.subscribe(new h(e,this.delay,this.scheduler))}}]),e}(),h=function(n){!function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&e(t,n)}(r,n);var i=t(r);function r(e,t,n){var c;return o(this,r),(c=i.call(this,e)).delay=t,c.scheduler=n,c.queue=[],c.active=!1,c.errored=!1,c}return c(r,[{key:"_schedule",value:function(e){this.active=!0,this.destination.add(e.schedule(r.dispatch,this.delay,{source:this,destination:this.destination,scheduler:e}))}},{key:"scheduleNotification",value:function(e){if(!0!==this.errored){var t=this.scheduler,n=new f(t.now()+this.delay,e);this.queue.push(n),!1===this.active&&this._schedule(t)}}},{key:"_next",value:function(e){this.scheduleNotification(u.a.createNext(e))}},{key:"_error",value:function(e){this.errored=!0,this.queue=[],this.destination.error(e),this.unsubscribe()}},{key:"_complete",value:function(){this.scheduleNotification(u.a.createComplete()),this.unsubscribe()}}],[{key:"dispatch",value:function(e){for(var t=e.source,n=t.queue,i=e.scheduler,o=e.destination;n.length>0&&n[0].time-i.now()<=0;)n.shift().notification.observe(o);if(n.length>0){var r=Math.max(0,n[0].time-i.now());this.schedule(e,r)}else this.unsubscribe(),t.active=!1}}]),r}(s.a),f=function e(t,n){o(this,e),this.time=t,this.notification=n}},IKhh:function(e,t,n){"use strict";n.r(t),n.d(t,"ViewDemoModule",(function(){return V}));var i=n("2kYt"),r=n("nIj0"),a=n("PBFl"),s=n("Meci"),u=n("+Tre"),d=n("sEIs"),l=n("bwdy"),h=n("EM62"),f=n("tUta"),b=n("bFHC"),p=n("7V4E");function g(e,t){if(1&e&&(h.Sb(0,"ps-block-ui",5),h.hc(1),h.Rb()),2&e){var n=h.dc(2);h.jc("blocked",n.contentBlocked)}}function _(e,t){if(1&e&&(h.Sb(0,"mat-icon",8),h.Ac(1),h.Rb()),2&e){var n=h.dc(3);h.Ab(1),h.Bc(n.exception.icon)}}function v(e,t){if(1&e&&(h.Sb(0,"mat-card",6),h.yc(1,_,2,1,"mat-icon",7),h.Sb(2,"span"),h.Ac(3),h.ec(4,"psErrorMessage"),h.Rb(),h.Rb()),2&e){var n=h.dc(2);h.Eb("ps-view__error-container--center",n.exception.alignCenter),h.Ab(1),h.jc("ngIf",n.exception.icon),h.Ab(2),h.Bc(h.fc(4,4,n.exception.errorObject))}}function m(e,t){if(1&e&&(h.Sb(0,"div",1),h.Sb(1,"div",2),h.yc(2,g,2,1,"ps-block-ui",3),h.yc(3,v,5,6,"mat-card",4),h.Rb(),h.Rb()),2&e){var n=h.dc();h.Ab(2),h.jc("ngIf",n.contentVisible),h.Ab(1),h.jc("ngIf",n.exception)}}var y,w,S=["*"],k=((y=function(){function e(t){o(this,e),this.cd=t,this._dataSourceSub=l.a.EMPTY}return c(e,[{key:"ngOnDestroy",value:function(){this._dataSourceSub.unsubscribe(),this._dataSource&&this._dataSource.disconnect()}},{key:"activateDataSource",value:function(){var e=this;this._dataSource&&(this._dataSourceSub=this._dataSource.connect().subscribe((function(){e.cd.markForCheck()})))}},{key:"dataSource",set:function(e){this._dataSource&&(this._dataSource.disconnect(),this._dataSourceSub.unsubscribe()),this._dataSource=e,this._dataSource&&this.activateDataSource()},get:function(){return this._dataSource}},{key:"contentVisible",get:function(){return this.dataSource.contentVisible}},{key:"contentBlocked",get:function(){return this.dataSource.contentBlocked}},{key:"exception",get:function(){return this.dataSource.exception}}]),e}()).\u0275fac=function(e){return new(e||y)(h.Mb(h.h))},y.\u0275cmp=h.Gb({type:y,selectors:[["ps-view"]],inputs:{dataSource:"dataSource"},ngContentSelectors:S,decls:1,vars:1,consts:[["class","ps-view__main-container",4,"ngIf"],[1,"ps-view__main-container"],[1,"ps-view__cards-container"],[3,"blocked",4,"ngIf"],["class","ps-view__error-container",3,"ps-view__error-container--center",4,"ngIf"],[3,"blocked"],[1,"ps-view__error-container"],["class","ps-view__error-icon",4,"ngIf"],[1,"ps-view__error-icon"]],template:function(e,t){1&e&&(h.ic(),h.yc(0,m,4,2,"div",0)),2&e&&h.jc("ngIf",t.dataSource)},directives:[i.m,f.a,s.a,b.a],pipes:[p.a],styles:[".ps-view__main-container{box-sizing:border-box}.ps-view__cards-container{display:grid;grid-gap:1em}mat-card.ps-view__error-container{color:var(--ps-error)}mat-card.ps-view__error-container--center{display:grid;justify-items:center}mat-icon.ps-view__error-icon{color:var(--ps-error);font-size:72px;height:72px;width:72px}"],encapsulation:2,changeDetection:0}),y),x=n("TqqQ"),j=n("aCbn"),O=((w=function e(){o(this,e)}).\u0275mod=h.Kb({type:w}),w.\u0275inj=h.Jb({factory:function(e){return new(e||w)},imports:[[i.c,s.e,b.b,x.a,j.a]]}),w),C=n("ZTXN"),R=n("C05f"),E=n("ROBh"),M=n("J+dc"),A=n("BwBJ"),P=n("YtkY");function B(e,t){if(1&e&&(h.Sb(0,"div",8),h.Ac(1),h.ec(2,"json"),h.Rb()),2&e){var n=t.$implicit;h.Ab(1),h.Bc(h.fc(2,1,n))}}var T,D,$=function(){function e(t){o(this,e),this.options=t,this._loading=!1,this._hasLoadError=!1,this._blockView=!1,this.stateChanges$=new C.a,this._loadingSub=l.a.EMPTY,this._connectSub=l.a.EMPTY}return c(e,[{key:"connect",value:function(){var e=this;return this._connectSub=this.options.loadTrigger$.subscribe((function(t){e.loadData(t)})),this.stateChanges$}},{key:"disconnect",value:function(){this._connectSub.unsubscribe(),this._loadingSub.unsubscribe()}},{key:"setViewBlocked",value:function(e){this._blockView=e,this.stateChanges$.next()}},{key:"loadData",value:function(e){var t=this;this._loadingSub.unsubscribe(),this._loading=!0,this._hasLoadError=!1,this.exception=null,this.stateChanges$.next(),this._loadingSub=this.options.loadFn(e).pipe(Object(M.a)(1)).subscribe({next:function(){t._loading=!1,t.stateChanges$.next()},error:function(e){t._loading=!1,t._hasLoadError=!0,t.exception={errorObject:e,alignCenter:!0,icon:"sentiment_very_dissatisfied"},t.stateChanges$.next()}})}},{key:"contentVisible",get:function(){return!this._hasLoadError}},{key:"contentBlocked",get:function(){return this._loading||this._blockView}}]),e}(),I=((D=function(){function e(){var t=this;o(this,e),this.loadError=!1,this.counter=0,this.logs=[],this.loadTrigger$=new R.a(this.counter),this.dataSource=new $({loadTrigger$:this.loadTrigger$,loadFn:function(e){return t.logs.push({type:"load",params:e}),Object(E.a)({loadCount:e,time:new Date}).pipe(Object(A.a)(1e3),Object(P.a)((function(e){if(t.loadError)throw new Error("this is the server error (loading)");return t.item=e,e})))}})}return c(e,[{key:"reload",value:function(){this.loadTrigger$.next(++this.counter)}}]),e}()).\u0275fac=function(e){return new(e||D)},D.\u0275cmp=h.Gb({type:D,selectors:[["app-view-demo"]],decls:15,vars:6,consts:[[1,"app-view-data-source-demo__settings"],[3,"ngModel","ngModelChange"],["mat-flat-button","","type","button","color","accent",3,"click"],[1,"app-form-data-source-demo__grid"],[3,"dataSource"],[2,"height","500px","margin-top","1em"],[1,"app-view-data-source-demo__logs"],["class","app-view-data-source-demo__log-item",4,"ngFor","ngForOf"],[1,"app-view-data-source-demo__log-item"]],template:function(e,t){1&e&&(h.Sb(0,"mat-card",0),h.Sb(1,"mat-checkbox",1),h.Zb("ngModelChange",(function(e){return t.loadError=e})),h.Ac(2,"load error"),h.Rb(),h.Sb(3,"button",2),h.Zb("click",(function(){return t.reload()})),h.Ac(4,"reload"),h.Rb(),h.Rb(),h.Sb(5,"div",3),h.Sb(6,"ps-view",4),h.Sb(7,"mat-card"),h.Sb(8,"pre"),h.Ac(9),h.ec(10,"json"),h.Rb(),h.Rb(),h.Sb(11,"mat-card",5),h.Ac(12,"dummy card"),h.Rb(),h.Rb(),h.Sb(13,"mat-card",6),h.yc(14,B,3,3,"div",7),h.Rb(),h.Rb()),2&e&&(h.Ab(1),h.jc("ngModel",t.loadError),h.Ab(5),h.jc("dataSource",t.dataSource),h.Ab(3),h.Bc(h.fc(10,4,t.item)),h.Ab(5),h.jc("ngForOf",t.logs))},directives:[s.a,u.a,r.n,r.q,a.a,k,i.l],pipes:[i.g],styles:[".app-view-data-source-demo__settings[_ngcontent-%COMP%] {\n        margin-bottom: 1em;\n      }\n\n      .app-view-data-source-demo__settings[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%] {\n        margin: 1em;\n      }\n\n      .app-view-data-source-demo__grid[_ngcontent-%COMP%] {\n        display: grid;\n        grid-template-columns: 2fr 1fr;\n        grid-gap: 1em;\n      }\n\n      .app-view-data-source-demo__logs[_ngcontent-%COMP%] {\n        margin-top: 1em;\n      }\n\n      .app-view-data-source-demo__log-item[_ngcontent-%COMP%] {\n        margin-bottom: 0.25em;\n        padding-bottom: 0.25em;\n        border-bottom: 1px solid #ccc;\n        font-size: 0.95em;\n      }"],changeDetection:0}),D),V=((T=function e(){o(this,e)}).\u0275mod=h.Kb({type:T}),T.\u0275inj=h.Jb({factory:function(e){return new(e||T)},imports:[[r.j,i.c,d.d.forChild([{path:"",component:I}]),s.e,u.b,a.b,O]]}),T)}}])}();