!function(){function t(e,r){return(t=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(e,r)}function e(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=o(t);if(e){var a=o(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return r(this,n)}}function r(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function o(t){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function a(t,e,r){return e&&i(t.prototype,e),r&&i(t,r),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{"2ZYK":function(t,e,r){"use strict";r.r(e),r.d(e,"FormDemoModule",(function(){return nt}));var o=r("2kYt"),i=r("nIj0"),s=r("PBFl"),c=r("Meci"),u=r("+Tre"),d=r("29Wa"),b=r("Cd2c"),l=r("R7+U"),f=r("sEIs"),h=r("bwdy"),p=r("C05f"),m=r("Ohay"),_=r("EM62"),v=r("tUta"),g=r("bFHC"),y=r("AZyY"),k=r("7V4E"),w=["errorCardWrapper"];function S(t,e){if(1&t&&(_.Rb(0,"ps-block-ui",7),_.gc(1),_.Qb()),2&t){var r=_.cc(2);_.ic("blocked",r.contentBlocked)}}function x(t,e){if(1&t&&(_.Rb(0,"mat-icon",10),_.zc(1),_.Qb()),2&t){var r=_.cc(3);_.Ab(1),_.Ac(r.exception.icon)}}function C(t,e){if(1&t&&(_.Rb(0,"mat-card",8),_.xc(1,x,2,1,"mat-icon",9),_.Rb(2,"span"),_.zc(3),_.dc(4,"psErrorMessage"),_.Qb(),_.Qb()),2&t){var r=_.cc(2);_.Db("ps-form__error-container--center",r.exception.alignCenter),_.Ab(1),_.ic("ngIf",r.exception.icon),_.Ab(2),_.Ac(_.ec(4,4,r.exception.errorObject))}}function R(t,e){if(1&t&&(_.Rb(0,"mat-icon"),_.zc(1),_.Qb()),2&t){var r=_.cc().$implicit;_.Ab(1),_.Ac(r.icon)}}function E(t,e){if(1&t&&(_.Rb(0,"button",17),_.Yb("click",(function(){return e.$implicit.click()})),_.xc(1,R,2,1,"mat-icon",18),_.zc(2),_.Qb()),2&t){var r=e.$implicit;_.Db("mat-raised-button","raised"===r.type)("mat-stroked-button","stroked"===r.type)("mat-icon-button","icon"===r.type),_.ic("color",r.color)("disabled",r.disabled&&r.disabled()),_.Ab(1),_.ic("ngIf",r.icon),_.Ab(1),_.Bc(" ",r.label," ")}}function O(t,e){if(1&t&&(_.Rb(0,"mat-card",11),_.Rb(1,"div",12),_.Mb(2,"ps-form-errors",13),_.Mb(3,"div",14),_.Rb(4,"div",15),_.gc(5,1),_.xc(6,E,3,10,"button",16),_.Qb(),_.Qb(),_.Qb()),2&t){var r=_.cc(2);_.Db("ps-form__savebar--sticky",r.savebarSticky),_.Ab(2),_.ic("form",r.form),_.Ab(4),_.ic("ngForOf",r.buttons)}}function M(t,e){if(1&t&&(_.Rb(0,"form",1),_.Rb(1,"div",2),_.xc(2,S,2,1,"ps-block-ui",3),_.Rb(3,"div",null,4),_.xc(5,C,5,6,"mat-card",5),_.Qb(),_.Qb(),_.xc(6,O,7,4,"mat-card",6),_.Qb()),2&t){var r=_.cc();_.ic("formGroup",r.form)("autocomplete",r.autocomplete),_.Ab(2),_.ic("ngIf",r.contentVisible),_.Ab(1),_.uc("display",r.exception?"block":"none"),_.Ab(2),_.ic("ngIf",r.exception),_.Ab(1),_.ic("ngIf",!r.savebarHidden)}}var I,Q,D=["*",[["","psFormSavebarButtons",""]]],A=["*","[psFormSavebarButtons]"],V={IntersectionObserver:IntersectionObserver},j=((I=function(){function t(e){n(this,t),this.cd=e,this._dataSourceSub=h.a.EMPTY,this._viewReady=!1,this._errrorInView$=new p.a(!1)}return a(t,[{key:"ngAfterViewInit",value:function(){this._viewReady=!0,this.updateErrorCardObserver(),this.activateDataSource()}},{key:"ngOnDestroy",value:function(){this._errorCardObserver&&(this._errorCardObserver.disconnect(),this._errorCardObserver=null),this._errrorInView$.complete(),this._dataSourceSub.unsubscribe(),this._dataSource&&this._dataSource.disconnect()}},{key:"activateDataSource",value:function(){var t=this;if(this._viewReady&&this._dataSource){var e={errorInView$:this._errrorInView$.pipe(Object(m.a)()),scrollToError:function(){t.errorCardWrapper.nativeElement.scrollIntoView({behavior:"smooth"})}};this._dataSourceSub=this._dataSource.connect(e).subscribe((function(){t.cd.markForCheck()}))}}},{key:"updateErrorCardObserver",value:function(){var t=this;!this._errorCardObserver&&this._dataSource&&this._viewReady?(this._errorCardObserver=new V.IntersectionObserver((function(e,r){t._errrorInView$.next(e[0].intersectionRatio>0),t.cd.markForCheck()}),{root:null,rootMargin:"-100px",threshold:0}),this._errorCardObserver.observe(this.errorCardWrapper.nativeElement)):this._errorCardObserver&&!this._dataSource&&(this._errorCardObserver.disconnect(),this._errorCardObserver=null)}},{key:"dataSource",set:function(t){this._dataSource&&(this._dataSource.disconnect(),this._dataSourceSub.unsubscribe()),this._dataSource=t,this.updateErrorCardObserver(),this._dataSource&&this.activateDataSource()},get:function(){return this._dataSource}},{key:"autocomplete",get:function(){return this.dataSource.autocomplete}},{key:"form",get:function(){return this.dataSource.form}},{key:"buttons",get:function(){return this.dataSource.buttons}},{key:"savebarMode",get:function(){return this.dataSource.savebarMode||"auto"}},{key:"savebarHidden",get:function(){return"hide"===this.savebarMode}},{key:"savebarSticky",get:function(){return"auto"===this.savebarMode?this.form.dirty||this.form.touched:"sticky"===this.savebarMode}},{key:"contentVisible",get:function(){return this.dataSource.contentVisible}},{key:"contentBlocked",get:function(){return this.dataSource.contentBlocked}},{key:"exception",get:function(){return this.dataSource.exception}}]),t}()).\u0275fac=function(t){return new(t||I)(_.Lb(_.h))},I.\u0275cmp=_.Fb({type:I,selectors:[["ps-form"]],viewQuery:function(t,e){var r;1&t&&_.Dc(w,!0),2&t&&_.mc(r=_.Zb())&&(e.errorCardWrapper=r.first)},inputs:{dataSource:"dataSource"},ngContentSelectors:A,decls:1,vars:1,consts:[["class","ps-form__main-container",3,"formGroup","autocomplete",4,"ngIf"],[1,"ps-form__main-container",3,"formGroup","autocomplete"],[1,"ps-form__cards-container"],[3,"blocked",4,"ngIf"],["errorCardWrapper",""],["class","ps-form__error-container",3,"ps-form__error-container--center",4,"ngIf"],["class","ps-form__savebar",3,"ps-form__savebar--sticky",4,"ngIf"],[3,"blocked"],[1,"ps-form__error-container"],["class","ps-form__error-icon",4,"ngIf"],[1,"ps-form__error-icon"],[1,"ps-form__savebar"],[1,"ps-form__savebar-container"],[3,"form"],[1,"ps-form__savebar-spacer"],[1,"ps-form__buttons"],["mat-button","","type","button",3,"mat-raised-button","mat-stroked-button","mat-icon-button","color","disabled","click",4,"ngFor","ngForOf"],["mat-button","","type","button",3,"color","disabled","click"],[4,"ngIf"]],template:function(t,e){1&t&&(_.hc(D),_.xc(0,M,7,7,"form",0)),2&t&&_.ic("ngIf",e.dataSource)},directives:[o.m,i.v,i.o,i.i,v.a,c.a,g.a,y.a,o.l,s.a],pipes:[k.a],styles:[".ps-form__main-container{box-sizing:border-box}.ps-form__cards-container{display:grid;grid-gap:1em}mat-card.ps-form__error-container{color:var(--ps-error)}mat-card.ps-form__error-container--center{display:grid;justify-items:center}mat-icon.ps-form__error-icon{color:var(--ps-error);font-size:72px;height:72px;width:72px}.ps-form__buttons button{margin:.25em}.ps-form__error-notfier-button{vertical-align:middle;cursor:pointer}.ps-form__savebar{bottom:-1px;margin:1em 0;z-index:5;padding:1em!important;display:flex;justify-content:space-between;border-top:5px solid var(--ps-accent)}mat-card.ps-form__savebar--sticky{position:-webkit-sticky;position:sticky}.ps-form__savebar-container{display:flex;flex-wrap:wrap;justify-content:flex-end;margin:-.25em;width:100%}.ps-form__savebar-container button{margin:.25em}.ps-form__savebar-spacer{margin-right:auto}@media only screen and (max-width:35em){mat-card.ps-form__savebar--sticky{position:static}}"],encapsulation:2,changeDetection:0}),I),T=r("TqqQ"),$=r("aCbn"),B=r("sKM9"),F=((Q=function t(){n(this,t)}).\u0275mod=_.Jb({type:Q}),Q.\u0275inj=_.Ib({factory:function(t){return new(t||Q)},imports:[[o.c,i.s,c.c,g.b,s.b,T.a,B.a,$.a]]}),Q),z=r("XoY3"),P=r("/BkX"),Y=r("/nyh"),q=r("mFH5"),N=r("ZTXN"),J=r("ROBh"),G=r("J+dc"),L=r("BwBJ"),W=r("YtkY"),H=r("8j5Y");function U(t,e){if(1&t&&(_.Rb(0,"div",13),_.zc(1),_.dc(2,"json"),_.Qb()),2&t){var r=e.$implicit;_.Ab(1),_.Ac(_.ec(2,1,r))}}var Z,X=function(){function t(e){var r=this;n(this,t),this.options=e,this.autocomplete="off",this.buttons=[],this._originalData=null,this._loading=!1,this._hasLoadError=!1,this._saving=!1,this._blockView=!1,this._isEditMode=!1,this._errorInView=!1,this.stateChanges$=new N.a,this._loadParams=null,this.buttonDefs={scrollToError:{type:"icon",icon:"error_outline",color:"warn",click:function(){return r._scrollToError()}},edit:{label:"bearbeiten",type:"raised",color:"primary",disabled:function(){return r.contentBlocked},click:function(){return r.edit()}},save:{label:"speichern",type:"raised",color:"primary",disabled:function(){return r.contentBlocked||!r.form.valid},click:function(){return r.save()}},cancel:{label:"cancel",type:"stroked",color:null,disabled:function(){return!1},click:function(){return r.reset()}}},this._loadingSub=h.a.EMPTY,this._connectSub=h.a.EMPTY,this._errorInViewSub=h.a.EMPTY}return a(t,[{key:"connect",value:function(t){var e=this;return this._scrollToError=function(){return setTimeout((function(){return t.scrollToError()}),0)},this._errorInViewSub=t.errorInView$.subscribe((function(t){e._errorInView=t,e.updateButtons(),e.stateChanges$.next()})),this._connectSub=this.options.loadTrigger$.subscribe((function(t){e._loadParams=t,e.loadData(t)})),this.stateChanges$}},{key:"disconnect",value:function(){this._connectSub.unsubscribe(),this._errorInViewSub.unsubscribe(),this._loadingSub.unsubscribe()}},{key:"setViewBlocked",value:function(t){this._blockView=t,this.stateChanges$.next()}},{key:"edit",value:function(){this.setEditMode(!0)}},{key:"save",value:function(){var t=this;this._saving=!0,this.exception=null,this.stateChanges$.next();var e=this.form.getRawValue();this.options.saveFn(e,this._loadParams).pipe(Object(G.a)(1)).subscribe({next:function(e){t.markDataSaved(),t.setEditMode(!1),t._saving=!1,t.stateChanges$.next()},error:function(e){t._saving=!1,t.exception={errorObject:e},t._errorInView||t._scrollToError(),t.updateButtons(),t.stateChanges$.next()}})}},{key:"reset",value:function(){this.resetData(),this.setEditMode(!1),this.stateChanges$.next()}},{key:"loadData",value:function(t){var e=this;this._loadingSub.unsubscribe(),this._loading=!0,this._hasLoadError=!1,this.exception=null,this.initializeData(null),this.setEditMode(!1),this.stateChanges$.next(),this._loadingSub=this.options.loadFn(t).pipe(Object(G.a)(1)).subscribe({next:function(t){e.initializeData(t),e._loading=!1,e.stateChanges$.next()},error:function(t){e._loading=!1,e._hasLoadError=!0,e.exception={errorObject:t,alignCenter:!0,icon:"sentiment_very_dissatisfied"},e.stateChanges$.next()}})}},{key:"initializeData",value:function(t){null==t?this.form.reset():this.form.patchValue(t),this.markDataSaved()}},{key:"markDataSaved",value:function(){this._originalData=this.form.getRawValue(),this.form.markAsPristine(),this.form.markAsUntouched()}},{key:"resetData",value:function(){this.form.patchValue(this._originalData),this.form.markAsPristine(),this.form.markAsUntouched()}},{key:"setEditMode",value:function(t){this._isEditMode=t,t?this.form.enable():this.form.disable(),this.updateButtons()}},{key:"updateButtons",value:function(){this.buttons=[],this.contentVisible&&(this._isEditMode?(this.exception&&!this._errorInView&&this.buttons.push(this.buttonDefs.scrollToError),this.buttons.push(this.buttonDefs.save),this.buttons.push(this.buttonDefs.cancel)):this.buttons.push(this.buttonDefs.edit))}},{key:"form",get:function(){return this.options.form}},{key:"contentVisible",get:function(){return!this._hasLoadError}},{key:"contentBlocked",get:function(){return this._loading||this._saving||this._blockView}},{key:"savebarMode",get:function(){return this._hasLoadError?"hide":"auto"}}]),t}(),K=((Z=function(){function t(){var e=this;n(this,t),this.loadError=!1,this.saveError=!1,this.form=new i.h({input1:new i.e("a"),input2:new i.e("b")},[function(t){return t.value.input1===t.value.input2?null:{equal:"input1 and input2 must be equal"}}]),this.counter=0,this.loadTrigger$=new p.a(this.counter),this.logs=[],this.dataSource=new X({form:this.form,loadTrigger$:this.loadTrigger$,loadFn:function(t){return e.logs.push({type:"load",params:t}),Object(J.a)({input1:"input 1 load count "+t,input2:"input 2 load count "+t}).pipe(Object(L.a)(1e3),Object(W.a)((function(t){if(e.loadError)throw new Error("this is the server error (loading)");return t})))},saveFn:function(t,r){return e.logs.push({type:"save",data:t,params:r}),Object(J.a)(null).pipe(Object(L.a)(1e3),Object(H.a)((function(t){if(e.saveError)throw new Error("this is the server error (saving)");return t})))}})}return a(t,[{key:"reload",value:function(){this.loadTrigger$.next(++this.counter)}}]),t}()).\u0275fac=function(t){return new(t||Z)},Z.\u0275cmp=_.Fb({type:Z,selectors:[["app-form-data-source-demo"]],decls:28,vars:5,consts:[[1,"app-form-data-source-demo__settings"],[3,"ngModel","ngModelChange"],["mat-flat-button","","type","button","color","accent",3,"click"],[1,"app-form-data-source-demo__grid"],[3,"dataSource"],[3,"formGroup"],["type","text","matInput","","formControlName","input1"],["type","text","matInput","","formControlName","input2"],[2,"height","500px","margin-top","1em"],["psFormSavebarButtons",""],["mat-stroked-button","","type","button"],[1,"app-form-data-source-demo__logs"],["class","app-form-data-source-demo__log-item",4,"ngFor","ngForOf"],[1,"app-form-data-source-demo__log-item"]],template:function(t,e){1&t&&(_.Rb(0,"mat-card",0),_.Rb(1,"mat-checkbox",1),_.Yb("ngModelChange",(function(t){return e.loadError=t})),_.zc(2,"load error"),_.Qb(),_.Rb(3,"mat-checkbox",1),_.Yb("ngModelChange",(function(t){return e.saveError=t})),_.zc(4,"save error"),_.Qb(),_.Rb(5,"button",2),_.Yb("click",(function(){return e.reload()})),_.zc(6,"reload"),_.Qb(),_.Qb(),_.Rb(7,"div",3),_.Rb(8,"ps-form",4),_.Rb(9,"mat-card"),_.Rb(10,"form",5),_.Rb(11,"mat-form-field"),_.Rb(12,"mat-label"),_.zc(13,"Input 1"),_.Qb(),_.Mb(14,"input",6),_.Qb(),_.Rb(15,"mat-form-field"),_.Rb(16,"mat-label"),_.zc(17,"Input 2"),_.Qb(),_.Mb(18,"input",7),_.Qb(),_.Qb(),_.Qb(),_.Rb(19,"mat-card",8),_.zc(20,"dummy card"),_.Qb(),_.Pb(21,9),_.Rb(22,"button",10),_.zc(23,"dummy button 1"),_.Qb(),_.Rb(24,"button",10),_.zc(25,"dummy button 2"),_.Qb(),_.Ob(),_.Qb(),_.Rb(26,"mat-card",11),_.xc(27,U,3,3,"div",12),_.Qb(),_.Qb()),2&t&&(_.Ab(1),_.ic("ngModel",e.loadError),_.Ab(2),_.ic("ngModel",e.saveError),_.Ab(5),_.ic("dataSource",e.dataSource),_.Ab(2),_.ic("formGroup",e.form),_.Ab(17),_.ic("ngForOf",e.logs))},directives:[c.a,u.a,i.n,i.q,s.a,j,i.v,i.o,i.i,d.d,d.h,b.a,i.c,i.g,o.l],pipes:[o.g],styles:["\n      .app-form-data-source-demo__settings {\n        margin-bottom: 1em;\n      }\n\n      .app-form-data-source-demo__settings mat-checkbox {\n        margin: 1em;\n      }\n\n      .app-form-data-source-demo__grid {\n        display: grid;\n        grid-template-columns: 2fr 1fr;\n        grid-gap: 1em;\n      }\n\n      .app-form-data-source-demo__log-item {\n        margin-bottom: 0.25em;\n        padding-bottom: 0.25em;\n        border-bottom: 1px solid #ccc;\n        font-size: 0.95em;\n      }\n\n      app-form-demo .mat-form-field {\n        display: block;\n      }\n    "],encapsulation:2,changeDetection:0}),Z);function tt(t,e){1&t&&_.Mb(0,"app-form-data-source-demo")}var et,rt=((et=function t(){n(this,t),this.demoType="dataSource"}).\u0275fac=function(t){return new(t||et)},et.\u0275cmp=_.Fb({type:et,selectors:[["app-form-demo"]],decls:7,vars:4,consts:[[1,"app-form-demo__settings"],[3,"ngModel","ngModelChange"],[3,"value"],[3,"ngSwitch"],[4,"ngSwitchCase"]],template:function(t,e){1&t&&(_.Rb(0,"mat-card",0),_.Rb(1,"mat-form-field"),_.Rb(2,"mat-select",1),_.Yb("ngModelChange",(function(t){return e.demoType=t})),_.Rb(3,"mat-option",2),_.zc(4,"dataSource"),_.Qb(),_.Qb(),_.Qb(),_.Qb(),_.Pb(5,3),_.xc(6,tt,1,0,"app-form-data-source-demo",4),_.Ob()),2&t&&(_.Ab(2),_.ic("ngModel",e.demoType),_.Ab(1),_.ic("value","dataSource"),_.Ab(2),_.ic("ngSwitch",e.demoType),_.Ab(1),_.ic("ngSwitchCase","dataSource"))},directives:[c.a,d.d,l.a,i.n,i.q,q.k,o.o,o.p,K],styles:[".app-form-demo__settings[_ngcontent-%COMP%] {\n        margin-bottom: 1em;\n      }"],changeDetection:0}),et);r("89kn");var ot,nt=((ot=function t(){n(this,t)}).\u0275mod=_.Jb({type:ot}),ot.\u0275inj=_.Ib({factory:function(t){return new(t||ot)},imports:[[i.j,i.s,o.c,z.b.forRoot(Y.a),P.a,F,f.d.forChild([{path:"",component:rt}]),b.b,d.f,c.c,u.b,l.b,s.b]]}),ot)},BwBJ:function(r,o,i){"use strict";i.d(o,"a",(function(){return d}));var s=i("Efrr"),c=i("5uGe"),u=i("ryP2");function d(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.a,o=(e=t)instanceof Date&&!isNaN(+e)?+t-r.now():Math.abs(t);return function(t){return t.lift(new b(o,r))}}var b=function(){function t(e,r){n(this,t),this.delay=e,this.scheduler=r}return a(t,[{key:"call",value:function(t,e){return e.subscribe(new l(t,this.delay,this.scheduler))}}]),t}(),l=function(r){!function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&t(e,r)}(i,r);var o=e(i);function i(t,e,r){var a;return n(this,i),(a=o.call(this,t)).delay=e,a.scheduler=r,a.queue=[],a.active=!1,a.errored=!1,a}return a(i,[{key:"_schedule",value:function(t){this.active=!0,this.destination.add(t.schedule(i.dispatch,this.delay,{source:this,destination:this.destination,scheduler:t}))}},{key:"scheduleNotification",value:function(t){if(!0!==this.errored){var e=this.scheduler,r=new f(e.now()+this.delay,t);this.queue.push(r),!1===this.active&&this._schedule(e)}}},{key:"_next",value:function(t){this.scheduleNotification(u.a.createNext(t))}},{key:"_error",value:function(t){this.errored=!0,this.queue=[],this.destination.error(t),this.unsubscribe()}},{key:"_complete",value:function(){this.scheduleNotification(u.a.createComplete()),this.unsubscribe()}}],[{key:"dispatch",value:function(t){for(var e=t.source,r=e.queue,o=t.scheduler,n=t.destination;r.length>0&&r[0].time-o.now()<=0;)r.shift().notification.observe(n);if(r.length>0){var i=Math.max(0,r[0].time-o.now());this.schedule(t,i)}else this.unsubscribe(),e.active=!1}}]),i}(c.a),f=function t(e,r){n(this,t),this.time=e,this.notification=r}}}])}();